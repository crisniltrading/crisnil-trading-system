<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRISNIL Trading Corp - Smart E-Commerce & Inventory System</title>
    <link rel="icon" type="image/svg+xml" href="assets/crisnil-logo.svg">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <link href="styles.css" rel="stylesheet">
    <link href="notification-panel.css" rel="stylesheet">
    <link href="product-management.css" rel="stylesheet">
    <link href="client-shopping.css" rel="stylesheet">
    <link href="features.css" rel="stylesheet">
    <link href="landing-modern.css" rel="stylesheet">
    <link href="expiry-tracker.css" rel="stylesheet">
    <link href="responsive-utils.css" rel="stylesheet">
    <link href="order-status-modal.css" rel="stylesheet">
</head>

<body>
    <!-- Floating Background Elements -->
    <div class="floating-elements" id="floatingElements"></div>

    <!-- Loading Animation -->
    <div class="loading" id="loading">
        <div class="spinner"></div>
    </div>

    <!-- Modern Landing Page -->
    <div class="landing-page" id="landingPage">
        <!-- Hero Section with Brand Logo -->
        <section class="hero-section-modern">
            <div class="hero-container">
                <!-- Brand Logo Section -->
                <div class="brand-logo-section">
                    <div class="logo-container">
                        <svg viewBox="0 0 200 200" class="brand-logo-svg">
                            <!-- Outer Red Arc -->
                            <path d="M 100 30 A 70 70 0 0 1 170 100" fill="none" stroke="#C41E3A" stroke-width="12"
                                stroke-linecap="round" />
                            <!-- Inner Black Arc -->
                            <path d="M 100 40 A 60 60 0 0 1 160 100" fill="none" stroke="#2C2C2C" stroke-width="8"
                                stroke-linecap="round" />
                            <!-- Bottom Red Arc -->
                            <path d="M 170 100 A 70 70 0 0 1 100 170" fill="none" stroke="#C41E3A" stroke-width="12"
                                stroke-linecap="round" />
                            <!-- Bottom Black Arc -->
                            <path d="M 160 100 A 60 60 0 0 1 100 160" fill="none" stroke="#2C2C2C" stroke-width="8"
                                stroke-linecap="round" />
                        </svg>
                        <div class="brand-text">
                            <h1 class="brand-name">CRISNIL</h1>
                            <p class="brand-subtitle">TRADING CORPORATION</p>
                        </div>
                    </div>
                </div>

                <!-- Dashboard Preview -->
                <div class="dashboard-mockup">
                    <div class="mockup-window">
                        <div class="mockup-header">
                            <div class="mockup-dots">
                                <span></span><span></span><span></span>
                            </div>
                            <span class="mockup-title">Dashboard</span>
                        </div>
                        <div class="mockup-content">
                            <div class="mockup-sidebar">
                                <div class="sidebar-item active">Orders</div>
                                <div class="sidebar-item">Items</div>
                                <div class="sidebar-item">Revenue</div>
                                <div class="sidebar-item">Profile</div>
                            </div>
                            <div class="mockup-main">
                                <div class="mockup-stats">
                                    <div class="stat-card">
                                        <div class="stat-chart">
                                            <svg viewBox="0 0 100 50">
                                                <polyline points="0,40 20,35 40,25 60,30 80,15 100,20" fill="none"
                                                    stroke="#10b981" stroke-width="2" />
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="stat-card">
                                        <div class="stat-donut">
                                            <svg viewBox="0 0 100 100">
                                                <circle cx="50" cy="50" r="40" fill="none" stroke="#e5e7eb"
                                                    stroke-width="12" />
                                                <circle cx="50" cy="50" r="40" fill="none" stroke="#C41E3A"
                                                    stroke-width="12" stroke-dasharray="188" stroke-dashoffset="47"
                                                    transform="rotate(-90 50 50)" />
                                            </svg>
                                        </div>
                                        <div class="stat-info-mini">
                                            <span class="stat-label-mini">Revenue</span>
                                            <span class="stat-value-mini">75%</span>
                                        </div>
                                    </div>
                                    <div class="stat-card">
                                        <div class="stat-gauge">
                                            <svg viewBox="0 0 100 60">
                                                <path d="M 10 50 A 40 40 0 0 1 90 50" fill="none" stroke="#e5e7eb"
                                                    stroke-width="8" />
                                                <path d="M 10 50 A 40 40 0 0 1 70 20" fill="none" stroke="#10b981"
                                                    stroke-width="8" />
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                                <div class="mockup-list">
                                    <div class="list-item">
                                        <div class="item-icon red"><i class="fas fa-exclamation"></i></div>
                                        <div class="item-text">
                                            <span>Your verification completed not</span>
                                            <span class="item-status">Pending</span>
                                        </div>
                                    </div>
                                    <div class="list-item">
                                        <div class="item-icon green"><i class="fas fa-check"></i></div>
                                        <div class="item-text">
                                            <span>Inventory updated successfully</span>
                                            <span class="item-status">Complete</span>
                                        </div>
                                    </div>
                                    <div class="list-item">
                                        <div class="item-icon blue"><i class="fas fa-user"></i></div>
                                        <div class="item-text">
                                            <span>New customer registered</span>
                                            <span class="item-status">Active</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Key Features Section -->
        <section class="features-section-modern" id="featuresSection">
            <div class="features-container">
                <h2 class="features-title">Key Features</h2>
                <div class="features-grid-modern">
                    <div class="feature-card-modern">
                        <div class="feature-icon-modern inventory">
                            <i class="fas fa-snowflake"></i>
                        </div>
                        <h3>Premium Quality</h3>
                        <p>Fresh frozen chicken, beef, pork, and seafood products maintained at optimal temperatures</p>
                    </div>
                    <div class="feature-card-modern">
                        <div class="feature-icon-modern finance">
                            <i class="fas fa-truck"></i>
                        </div>
                        <h3>Fast Delivery</h3>
                        <p>Reliable delivery service across Region 4 and National Capital Region (NCR)</p>
                    </div>
                    <div class="feature-card-modern">
                        <div class="feature-icon-modern analytics">
                            <i class="fas fa-tags"></i>
                        </div>
                        <h3>Competitive Prices</h3>
                        <p>Wholesale pricing for restaurants, hotels, and businesses with special bulk discounts</p>
                    </div>
                    <div class="feature-card-modern">
                        <div class="feature-icon-modern promotions">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <h3>Easy Online Ordering</h3>
                        <p>Browse products, check availability, and place orders 24/7 through our platform</p>
                    </div>
                    <div class="feature-card-modern">
                        <div class="feature-icon-modern portal">
                            <i class="fas fa-headset"></i>
                        </div>
                        <h3>Customer Support</h3>
                        <p>Dedicated support team ready to assist with orders, inquiries, and special requests</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Stats Section -->
        <section class="stats-section">
            <div class="stats-container">
                <div class="stat-item">
                    <div class="stat-number">40+</div>
                    <div class="stat-label">Employees</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">500+</div>
                    <div class="stat-label">Daily Transactions</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">2</div>
                    <div class="stat-label">Regions Served</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">99.9%</div>
                    <div class="stat-label">Uptime</div>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section class="about-section">
            <div class="about-container">
                <div class="about-content">
                    <h2>About Crisnil Trading Corp.</h2>
                    <p>Crisnil Trading Corp. is a meat Trading company that supplies frozen, chicken, beef, and pork
                        products to various markets across Region 4 and the National Capital Region (NCR) in the
                        Philippines. With 40 employees, the company handles daily sales transactions, inventory
                        management, and delivery dispatching.</p>
                    <div class="about-features">
                        <div class="about-feature">
                            <i class="fas fa-truck"></i>
                            <span>Fast Delivery</span>
                        </div>
                        <div class="about-feature">
                            <i class="fas fa-snowflake"></i>
                            <span>Cold Chain Management</span>
                        </div>
                        <div class="about-feature">
                            <i class="fas fa-certificate"></i>
                            <span>Quality Assured</span>
                        </div>
                    </div>
                </div>
                <div class="about-image">
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 300'%3E%3Crect fill='%23f3f4f6' width='400' height='300'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='sans-serif' font-size='18' fill='%239ca3af'%3ETeam Collaboration%3C/text%3E%3C/svg%3E"
                        alt="Team collaboration">
                </div>
            </div>
        </section>

        <!-- How It Works Section -->
        <section class="how-it-works-section">
            <div class="how-it-works-container">
                <h2 class="section-title">How It Works</h2>
                <p class="section-subtitle">Get started in 3 simple steps</p>
                <div class="steps-grid">
                    <div class="step-card">
                        <div class="step-number">1</div>
                        <div class="step-icon">
                            <i class="fas fa-user-plus"></i>
                        </div>
                        <h3>Create Account</h3>
                        <p>Sign up in minutes with your business details</p>
                    </div>
                    <div class="step-card">
                        <div class="step-number">2</div>
                        <div class="step-icon">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <h3>Browse & Order</h3>
                        <p>Select from our wide range of frozen products and add to cart</p>
                    </div>
                    <div class="step-card">
                        <div class="step-number">3</div>
                        <div class="step-icon">
                            <i class="fas fa-truck"></i>
                        </div>
                        <h3>Fast Delivery</h3>
                        <p>Receive your order with our reliable delivery service</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Testimonials Section -->
        <section class="testimonials-section">
            <div class="testimonials-container">
                <h2 class="section-title">What Our Clients Say</h2>
                <div class="testimonials-grid">
                    <div class="testimonial-card">
                        <div class="testimonial-stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </div>
                        <p class="testimonial-text">"Best quality frozen products! We've been ordering from CRISNIL for
                            2 years. Always fresh, great prices, and fast delivery."</p>
                        <div class="testimonial-author">
                            <div class="author-avatar">MS</div>
                            <div>
                                <strong>Maria Santos</strong>
                                <span>Owner, Santos Restaurant</span>
                            </div>
                        </div>
                    </div>
                    <div class="testimonial-card">
                        <div class="testimonial-stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </div>
                        <p class="testimonial-text">"Reliable supplier for our hotel. The chicken and beef quality is
                            excellent. Online ordering makes it so convenient!"</p>
                        <div class="testimonial-author">
                            <div class="author-avatar">JD</div>
                            <div>
                                <strong>Juan Dela Cruz</strong>
                                <span>Purchasing Manager, Grand Hotel</span>
                            </div>
                        </div>
                    </div>
                    <div class="testimonial-card">
                        <div class="testimonial-stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </div>
                        <p class="testimonial-text">"Excellent customer service! They always deliver on time and the
                            products are top quality. Highly recommend CRISNIL!"</p>
                        <div class="testimonial-author">
                            <div class="author-avatar">AR</div>
                            <div>
                                <strong>Ana Reyes</strong>
                                <span>Owner, Reyes Catering Services</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Demo Preview Section -->
        <section class="demo-section">
            <div class="demo-container">
                <div class="demo-video">
                    <div class="video-placeholder">
                        <div class="play-button">
                            <i class="fas fa-play"></i>
                        </div>
                        <div class="video-mockup">
                            <div class="video-header">
                                <span>Dashboard</span>
                                <span>Items</span>
                                <span>Revenue</span>
                                <span>Profile</span>
                            </div>
                            <div class="video-content">
                                <div class="video-chart">
                                    <svg viewBox="0 0 200 100">
                                        <polyline points="0,80 40,60 80,40 120,50 160,20 200,30" fill="none"
                                            stroke="#10b981" stroke-width="3" />
                                    </svg>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="demo-content">
                    <h2>Ready to order premium frozen products?</h2>
                    <p>Browse our selection of quality chicken, beef, pork, and seafood products.</p>
                    <button class="btn btn-primary btn-large" onclick="showLogin()">
                        <i class="fas fa-shopping-cart"></i>
                        Start Shopping
                    </button>
                </div>
            </div>
        </section>

        <!-- CTA Section -->
        <section class="cta-section-modern">
            <div class="cta-container">
                <div class="cta-content-modern">
                    <h2>Ready to Order Quality Frozen Products?</h2>
                    <p>Join hundreds of restaurants, hotels, and businesses who trust CRISNIL Trading Corp for their
                        frozen food supply</p>
                    <div class="cta-buttons">
                        <button class="btn btn-primary btn-large" onclick="showLogin()">
                            <i class="fas fa-shopping-cart"></i>
                            Shop Now
                        </button>
                        <button class="btn btn-outline-white btn-large" onclick="scrollToFeatures()">
                            <i class="fas fa-phone"></i>
                            Contact Us
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer-modern">
            <div class="footer-container">
                <div class="footer-brand">
                    <div class="footer-logo">
                        <svg viewBox="0 0 100 100" width="50" height="50">
                            <path d="M 50 15 A 35 35 0 0 1 85 50" fill="none" stroke="#C41E3A" stroke-width="6"
                                stroke-linecap="round" />
                            <path d="M 50 20 A 30 30 0 0 1 80 50" fill="none" stroke="#2C2C2C" stroke-width="4"
                                stroke-linecap="round" />
                            <path d="M 85 50 A 35 35 0 0 1 50 85" fill="none" stroke="#C41E3A" stroke-width="6"
                                stroke-linecap="round" />
                            <path d="M 80 50 A 30 30 0 0 1 50 80" fill="none" stroke="#2C2C2C" stroke-width="4"
                                stroke-linecap="round" />
                        </svg>
                        <div>
                            <h3>CRISNIL</h3>
                            <p>Trading Corporation</p>
                        </div>
                    </div>
                    <p class="footer-description">Your trusted partner in frozen food distribution and inventory
                        management.</p>
                </div>
                <div class="footer-links">
                    <div class="footer-column">
                        <h4>Product</h4>
                        <a href="#featuresSection">Features</a>
                        <a href="#" onclick="showLogin()">Pricing</a>
                        <a href="#" onclick="showLogin()">Demo</a>
                    </div>
                    <div class="footer-column">
                        <h4>Company</h4>
                        <a href="#about">About Us</a>
                        <a href="#" onclick="showLogin()">Contact</a>
                        <a href="#" onclick="showLogin()">Careers</a>
                    </div>
                    <div class="footer-column">
                        <h4>Support</h4>
                        <a href="#" onclick="showLogin()">Help Center</a>
                        <a href="#" onclick="showLogin()">Documentation</a>
                        <a href="#" onclick="showLogin()">API</a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 CRISNIL Trading Corporation. All rights reserved.</p>
            </div>
        </footer>
    </div>

    <!-- Modern Login Screen -->
    <div class="login-screen-modern" id="loginScreen">
        <div class="login-background">
            <div class="login-pattern"></div>
        </div>
        <div class="login-container-modern">
            <div class="login-card-modern">
                <!-- Brand Logo in Login -->
                <div class="login-brand">
                    <img src="assets/crisnil-logo.svg" alt="CRISNIL Trading Corp" class="login-logo-svg"
                        style="width: 300px; height: auto; margin-bottom: 1.5rem;">
                    <h2 class="login-title">Welcome to CRISNIL Trading Corp</h2>
                    <p class="login-subtitle">Premium Frozen Food Products - Chicken, Beef, Pork & Seafood</p>
                </div>

                <!-- Login Form -->
                <form id="loginForm" class="login-form-modern">
                    <div class="form-group-modern">
                        <label class="form-label-modern">
                            <i class="fas fa-user"></i>
                            Username
                        </label>
                        <input type="text" class="form-input-modern" id="username" required
                            placeholder="Enter your username" autocomplete="username">
                    </div>

                    <div class="form-group-modern">
                        <label class="form-label-modern">
                            <i class="fas fa-lock"></i>
                            Password
                        </label>
                        <div class="password-input-wrapper">
                            <input type="password" class="form-input-modern" id="password" required
                                placeholder="Enter your password" autocomplete="current-password">
                            <button type="button" class="password-toggle" onclick="togglePassword()">
                                <i class="fas fa-eye" id="passwordToggleIcon"></i>
                            </button>
                        </div>
                    </div>

                    <div class="form-options">
                        <label class="checkbox-label">
                            <input type="checkbox" id="rememberMe">
                            <span>Remember me</span>
                        </label>
                        <a href="forgot-password.html" class="forgot-link">
                            <i class="fas fa-key"></i> Forgot Password?
                        </a>
                    </div>

                    <button type="submit" class="btn-login-modern">
                        <i class="fas fa-sign-in-alt"></i>
                        Sign In
                    </button>
                </form>

                <!-- Divider -->
                <div class="login-divider">
                    <span>or</span>
                </div>

                <!-- Social Login Options -->
                <div class="social-login">
                    <button class="btn-social google" type="button">
                        <i class="fab fa-google"></i>
                        Continue with Google
                    </button>
                    <button class="btn-social microsoft" type="button">
                        <i class="fab fa-microsoft"></i>
                        Continue with Microsoft
                    </button>
                </div>

                <!-- Create Account -->
                <div class="login-footer">
                    <p>Don't have an account?</p>
                    <button class="btn-create-account" onclick="showRegister()">
                        <i class="fas fa-user-plus"></i>
                        Create Account
                    </button>
                </div>

                <!-- Security Badge -->
                <div class="security-badge">
                    <i class="fas fa-shield-alt"></i>
                    <span>Secured with 256-bit SSL encryption</span>
                </div>
            </div>

            <!-- Login Side Panel -->
            <div class="login-side-panel">
                <div class="side-panel-content">
                    <h3>Why Shop with CRISNIL?</h3>
                    <div class="feature-list">
                        <div class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <div>
                                <h4>Premium Quality</h4>
                                <p>Fresh frozen products</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <div>
                                <h4>Fast Delivery</h4>
                                <p>Region 4 & NCR coverage</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <div>
                                <h4>Best Prices</h4>
                                <p>Competitive wholesale rates</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <div>
                                <h4>Easy Ordering</h4>
                                <p>Shop online anytime</p>
                            </div>
                        </div>
                    </div>
                    <div class="testimonial">
                        <i class="fas fa-quote-left"></i>
                        <p>"Best quality frozen products! Fast delivery and great prices. Highly recommended!"</p>
                        <div class="testimonial-author">
                            <strong>Maria Santos</strong>
                            <span>Restaurant Owner</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Dashboard -->
    <div class="dashboard" id="dashboard">
        <div class="dashboard-header">
            <div class="header-content">
                <div class="header-left">
                    <div class="brand-section">
                        <div class="brand-icon">
                            <img src="assets/crisnil-logo.svg" alt="CRISNIL" style="height: 50px; width: auto;">
                        </div>
                        <div class="brand-info">
                            <h1 class="brand-title">CRISNIL Trading Corp</h1>
                            <p class="brand-subtitle">Smart E-Commerce & Inventory System</p>
                        </div>
                    </div>
                </div>
                <div class="header-right">
                    <!-- Notification Toggle Button -->
                    <button class="theme-toggle" id="notificationToggle" onclick="toggleNotificationPanel()" title="Notifications" style="margin-right: 1rem; position: relative;">
                        <i class="fas fa-bell"></i>
                        <span id="notificationBadge" class="notification-badge" style="display: none;">0</span>
                    </button>
                    
                    <!-- Dark Theme Toggle Button -->
                    <button class="theme-toggle" id="themeToggle" title="Toggle Dark Mode" style="margin-right: 1rem;">
                        <i class="fas fa-moon"></i>
                    </button>
                    
                    <div class="user-profile">
                        <div class="user-avatar">
                            <span id="userInitials">A</span>
                            <img id="headerProfilePicture" style="display: none; width: 100%; height: 100%; object-fit: cover; border-radius: 50%; position: absolute; top: 0; left: 0;" alt="Profile">
                        </div>
                        <div class="user-details">
                            <div class="username" id="userDisplayName">admin</div>
                            <div class="user-role">
                                <span class="role-badge role-admin" id="userRole">ADMIN</span>
                            </div>
                        </div>
                        <button class="user-menu-btn" onclick="toggleUserMenu()">
                            <i class="fas fa-chevron-down"></i>
                        </button>
                    </div>
                    <div class="user-menu" id="userMenu" style="display: none;">
                        <a href="#" onclick="openProfileSettings(); return false;">
                            <i class="fas fa-user-cog"></i>
                            Profile Settings
                        </a>
                        <a href="#" onclick="logout(); return false;" class="logout-item">
                            <i class="fas fa-sign-out-alt"></i>
                            Sign Out
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <div class="nav-tabs">
            <div class="tabs-container" id="navTabs">
                <button id="tab-overview" class="nav-tab active" onclick="switchTab('overview')">
                    <i class="fas fa-chart-line"></i> Overview
                </button>
                <button id="tab-products" class="nav-tab" onclick="switchTab('products')">
                    <i class="fas fa-box"></i> Products
                </button>
                <button id="tab-orders" class="nav-tab" onclick="switchTab('orders')">
                    <i class="fas fa-shopping-cart"></i> Orders
                </button>
                <button id="tab-cart" class="nav-tab" onclick="switchTab('cart')" style="position: relative;">
                    <i class="fas fa-basket-shopping"></i> Cart
                    <span id="cartBadge"
                        style="display: none; position: absolute; top: 0.25rem; right: 0.25rem; background: var(--error); color: white; border-radius: 50%; width: 20px; height: 20px; font-size: 0.75rem; font-weight: 700; display: flex; align-items: center; justify-content: center;">0</span>
                </button>
                <button id="tab-wishlist" class="nav-tab" onclick="switchTab('wishlist')" style="position: relative;">
                    <i class="fas fa-heart"></i> Wishlist
                    <span id="wishlistBadge"
                        style="display: none; position: absolute; top: 0.25rem; right: 0.25rem; background: var(--error); color: white; border-radius: 50%; width: 20px; height: 20px; font-size: 0.75rem; font-weight: 700; display: flex; align-items: center; justify-content: center;">0</span>
                </button>
                <button id="tab-checkout" class="nav-tab" onclick="switchTab('checkout')" style="display:none;">
                    <i class="fas fa-credit-card"></i> Checkout
                </button>
                <button id="tab-inventory" class="nav-tab" onclick="switchTab('inventory')">
                    <i class="fas fa-warehouse"></i> Inventory
                </button>
                <button id="tab-expiry-tracker" class="nav-tab" onclick="switchTab('expiry-tracker')">
                    <i class="fas fa-calendar-times"></i> Expiry Tracker
                </button>
                <button id="tab-analytics" class="nav-tab" onclick="switchTab('analytics')">
                    <i class="fas fa-chart-bar"></i> Analytics
                </button>
                <button id="tab-transactions" class="nav-tab" onclick="switchTab('transactions')">
                    <i class="fas fa-file-invoice-dollar"></i> Transactions
                </button>
                <button id="tab-promotions" class="nav-tab" onclick="switchTab('promotions')">
                    <i class="fas fa-tags"></i> Promotions
                </button>
                <button id="tab-reports" class="nav-tab" onclick="switchTab('reports')">
                    <i class="fas fa-chart-line"></i> Reports
                </button>
            </div>
        </div>

        <div class="content-wrapper">
            <!-- Overview Section -->
            <div class="content-section active" id="overviewSection">
                <!-- Quick Search Bar for Clients -->
                <div class="card" id="overviewQuickSearch" style="display: none; margin-bottom: 1.5rem;">
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <div style="flex: 1; position: relative;">
                            <input type="text" id="overviewSearchInput" class="form-input"
                                placeholder="🔍 Quick search products..." style="width: 100%; padding-right: 100px;"
                                onkeyup="handleOverviewSearch(event)">
                            <button class="btn btn-primary"
                                style="position: absolute; right: 0.5rem; top: 50%; transform: translateY(-50%);"
                                onclick="performOverviewSearch()">
                                <i class="fas fa-search"></i> Search
                            </button>
                        </div>
                    </div>
                    <div id="overviewSearchSuggestions"
                        style="display: none; margin-top: 1rem; max-height: 300px; overflow-y: auto;"></div>
                </div>

                <div class="stats-grid" id="statsGrid"></div>

                <div class="card">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                        <h3 style="display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-clock"></i>
                            Recent Activities
                        </h3>
                        <div>
                            <input type="text" id="activitySearch" class="form-input" placeholder="Search activities..."
                                style="width: 200px; margin-right: 0.5rem;" oninput="filterActivities(this.value)">
                            <select id="activityFilter" class="form-input" style="width: 150px;"
                                onchange="filterActivities()">
                                <option value="all">All Activities</option>
                                <option value="orders">Orders</option>
                                <option value="payments">Payments</option>
                                <option value="alerts">Alerts</option>
                                <option value="promotions">Promotions</option>
                            </select>
                        </div>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 2rem;">
                        <!-- Left Column -->
                        <div>
                            <h4
                                style="margin-bottom: 1rem; color: var(--text-muted); display: flex; align-items: center; gap: 0.5rem;">
                                <i class="fas fa-shopping-cart"></i> Recent Orders
                            </h4>
                            <div id="recentOrders">
                                <div class="text-sm" style="color: var(--text-muted);">No recent orders.</div>
                            </div>
                            <h4
                                style="margin: 1.5rem 0 1rem 0; color: var(--text-muted); display: flex; align-items: center; gap: 0.5rem;">
                                <i class="fas fa-credit-card"></i> Recent Payments
                            </h4>
                            <div id="recentPayments">
                                <div class="text-sm" style="color: var(--text-muted);">No recent payments.</div>
                            </div>
                            <h4
                                style="margin: 1.5rem 0 1rem 0; color: var(--text-muted); display: flex; align-items: center; gap: 0.5rem;">
                                <i class="fas fa-eye"></i> Recently Viewed
                            </h4>
                            <div id="recentlyViewed">
                                <div class="text-sm" style="color: var(--text-muted);">No viewed products yet.</div>
                            </div>
                        </div>
                        <!-- Right Column -->
                        <div>
                            <h4
                                style="margin-bottom: 1rem; color: var(--text-muted); display: flex; align-items: center; gap: 0.5rem;">
                                <i class="fas fa-gift"></i> Special Offers for You
                            </h4>
                            <div id="overviewPromotionsList" style="margin-bottom: 2rem;">
                                <div class="text-sm" style="color: var(--text-muted);">No active promotions.</div>
                            </div>
                            <h4
                                style="margin-bottom: 1rem; color: var(--text-muted); display: flex; align-items: center; gap: 0.5rem;">
                                <i class="fas fa-exclamation-triangle"></i> Inventory Alerts
                            </h4>
                            <div id="inventoryAlerts">
                                <div class="text-sm" style="color: var(--text-muted);">No inventory alerts.</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Admin Quick Actions -->
                <div class="card" id="adminQuickActions" style="display: none;">
                    <h3 style="margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.5rem;">
                        <i class="fas fa-tools"></i>
                        Quick Actions
                    </h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                        <button class="btn btn-primary" onclick="switchTab('inventory')">
                            <i class="fas fa-boxes"></i>
                            Manage Inventory
                        </button>
                        <button class="btn btn-secondary" onclick="switchTab('orders')">
                            <i class="fas fa-list"></i>
                            View All Orders
                        </button>
                        <button class="btn btn-info" onclick="switchTab('analytics')">
                            <i class="fas fa-chart-bar"></i>
                            View Analytics
                        </button>
                        <button class="btn btn-warning" onclick="showCreateStaffModal()">
                            <i class="fas fa-user-plus"></i>
                            Create Staff Account
                        </button>
                        <button class="btn btn-success" onclick="switchTab('promotions')">
                            <i class="fas fa-tag"></i>
                            Manage Promotions
                        </button>
                        <button class="btn btn-dark" onclick="switchTab('settings')">
                            <i class="fas fa-cog"></i>
                            System Settings
                        </button>
                    </div>
                </div>

                <!-- System Health Dashboard -->
                <div class="card" id="systemHealthCard" style="display: none;">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                        <h3 style="display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-heartbeat"></i>
                            System Health
                        </h3>
                        <div id="systemStatusIndicator" class="badge badge-success">
                            <i class="fas fa-check-circle"></i> System Online
                        </div>
                    </div>
                    <div
                        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">
                        <div
                            style="padding: 1rem; background: var(--background); border-radius: 0.5rem; border-left: 4px solid var(--success);">
                            <h4 style="margin-bottom: 0.5rem; color: var(--success);">Database Status</h4>
                            <p style="margin: 0; color: var(--text-muted);" id="dbStatus">Connected and healthy</p>
                        </div>
                        <div
                            style="padding: 1rem; background: var(--background); border-radius: 0.5rem; border-left: 4px solid var(--success);">
                            <h4 style="margin-bottom: 0.5rem; color: var(--success);">API Status</h4>
                            <p style="margin: 0; color: var(--text-muted);" id="apiStatus">All endpoints operational</p>
                        </div>
                        <div
                            style="padding: 1rem; background: var(--background); border-radius: 0.5rem; border-left: 4px solid var(--warning);">
                            <h4 style="margin-bottom: 0.5rem; color: var(--warning);">Data Mode</h4>
                            <p style="margin: 0; color: var(--text-muted);" id="dataMode">Live Data Active</p>
                        </div>
                        <div
                            style="padding: 1rem; background: var(--background); border-radius: 0.5rem; border-left: 4px solid var(--info);">
                            <h4 style="margin-bottom: 0.5rem; color: var(--info);">Active Users</h4>
                            <p style="margin: 0; color: var(--text-muted);" id="activeUsers">Loading...</p>
                        </div>
                    </div>
                </div>

                <!-- Client Promotions Section -->
                <div class="card" id="clientPromotionsCard" style="display: none;">
                    <h3 style="margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.5rem;">
                        <i class="fas fa-tags"></i>
                        Special Offers & Promotions
                    </h3>
                    <div id="clientPromotionsList"
                        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">
                        <!-- Promotions will be populated here -->
                    </div>
                    <div style="text-align: center; margin-top: 1.5rem;">
                        <button class="btn btn-primary" onclick="switchTab('products')">
                            <i class="fas fa-shopping-cart"></i>
                            Shop Now
                        </button>
                    </div>
                </div>
            </div>

            <!-- Products Section -->
            <div class="content-section" id="productsSection">
                <div
                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem;">
                    <div style="display: flex; align-items: center; gap: 1rem; flex-wrap: wrap;">
                        <h2 style="display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-shopping-bag"></i>
                            Available Products
                        </h2>
                        <button id="myOrdersQuickLink" class="btn btn-secondary interactive"
                            onclick="switchTab('transactions')" style="display: none;">
                            <i class="fas fa-file-invoice-dollar"></i>
                            My Orders
                        </button>
                    </div>
                    <div style="display: flex; gap: 0.5rem;">
                        <button id="addProductBtn" class="btn btn-primary interactive" onclick="showAddProductModal()">
                            <i class="fas fa-plus"></i>
                            Add Product
                        </button>
                    </div>
                </div>

                <!-- Product Stats Bar -->
                <div id="productStatsBar"></div>

                <!-- Filter Controls -->
                <div class="card" style="margin-bottom: 1.5rem;">
                    <div class="filter-controls">
                        <input type="text" class="form-input" placeholder="Search products..." id="productSearch"
                            oninput="searchProducts(this.value)">
                        <select class="form-input" id="productCategory" onchange="applyProductFilters()">
                            <option value="">All Categories</option>
                            <option value="chicken">Chicken</option>
                            <option value="beef">Beef</option>
                            <option value="pork">Pork</option>
                            <option value="seafood">Seafood</option>
                            <option value="vegetables">Vegetables</option>
                            <option value="dairy">Dairy</option>
                            <option value="other">Other</option>
                        </select>
                        <select class="form-input" id="stockStatus" onchange="applyProductFilters()">
                            <option value="">All Stock</option>
                            <option value="in">In Stock</option>
                            <option value="low">Low Stock</option>
                            <option value="out">Out of Stock</option>
                        </select>
                        <input type="number" class="form-input" id="priceMin" placeholder="Min ₱" style="width: 120px;">
                        <input type="number" class="form-input" id="priceMax" placeholder="Max ₱" style="width: 120px;">
                        <div class="sort-controls">
                            <select class="form-input" id="sortBy" onchange="applyProductFilters()">
                                <option value="createdAt">Date Added</option>
                                <option value="name">Name</option>
                                <option value="price">Price</option>
                                <option value="stock">Stock</option>
                            </select>
                            <select class="form-input" id="sortOrder" onchange="applyProductFilters()">
                                <option value="desc">Descending</option>
                                <option value="asc">Ascending</option>
                            </select>
                        </div>
                        <button class="btn btn-secondary" onclick="applyProductFilters()">
                            <i class="fas fa-filter"></i> Apply
                        </button>
                    </div>
                </div>

                <!-- Bulk Actions Bar (Admin Only) -->
                <div id="bulkActionsBar">
                    <span class="selected-info">
                        <i class="fas fa-check-square"></i>
                        <span id="selectedCount">0</span> selected
                    </span>
                    <button class="btn btn-sm btn-secondary" onclick="selectAllProducts()">
                        <i class="fas fa-check-double"></i> Select All
                    </button>
                    <button class="btn btn-sm btn-secondary" onclick="deselectAllProducts()">
                        <i class="fas fa-times"></i> Deselect All
                    </button>
                    <button class="btn btn-sm btn-primary" onclick="bulkUpdateProducts()">
                        <i class="fas fa-edit"></i> Bulk Update
                    </button>
                    <button class="btn btn-sm btn-danger" onclick="bulkDeleteProducts()">
                        <i class="fas fa-trash"></i> Bulk Delete
                    </button>
                </div>

                <!-- Products Grid -->
                <div class="products-grid" id="productsGrid">
                    <!-- Products will be loaded dynamically -->
                </div>
            </div>

            <!-- Orders Section -->
            <div class="content-section" id="ordersSection">
                <div
                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; flex-wrap: wrap; gap: 1rem;">
                    <h2 style="display: flex; align-items: center; gap: 0.5rem; margin: 0;">
                        <i class="fas fa-shopping-cart"></i>
                        Order Management
                    </h2>
                    <div style="display: flex; gap: 0.5rem; align-items: center; flex-wrap: wrap;">
                        <button class="btn btn-secondary" onclick="loadOrders()" title="Refresh orders">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                        <button class="btn btn-secondary" onclick="exportOrdersCSV()" title="Export to CSV">
                            <i class="fas fa-download"></i> Export
                        </button>
                        <button class="btn btn-secondary" onclick="openNotificationSettings()"
                            title="Notification settings">
                            <i class="fas fa-bell"></i>
                        </button>
                    </div>
                </div>

                <!-- Search and Sort -->
                <div style="display: flex; gap: 1rem; margin-bottom: 1rem; flex-wrap: wrap;">
                    <input type="search" id="orderSearch" class="form-input"
                        placeholder="Search by customer name, order ID, or email..."
                        onkeyup="handleOrderSearch(this.value)" style="flex: 1; min-width: 250px;">
                    <select id="orderSort" class="form-input" onchange="handleOrderSort()" style="width: 200px;">
                        <option value="-createdAt">Newest First</option>
                        <option value="createdAt">Oldest First</option>
                        <option value="-totalAmount">Highest Amount</option>
                        <option value="totalAmount">Lowest Amount</option>
                    </select>
                </div>

                <!-- Status Filter Buttons -->
                <div style="display: flex; gap: 0.5rem; margin-bottom: 1.5rem; flex-wrap: wrap;" id="statusFilters">
                    <button class="btn btn-sm active" onclick="filterOrdersByStatus('all')" data-status="all"
                        style="position: relative;">
                        All <span class="badge" id="count-all"
                            style="margin-left: 0.5rem; padding: 0.125rem 0.5rem; background: var(--background); border-radius: 1rem; font-size: 0.75rem;">0</span>
                    </button>
                    <button class="btn btn-sm" onclick="filterOrdersByStatus('pending')" data-status="pending"
                        style="position: relative;">
                        Pending <span class="badge" id="count-pending"
                            style="margin-left: 0.5rem; padding: 0.125rem 0.5rem; background: var(--background); border-radius: 1rem; font-size: 0.75rem;">0</span>
                    </button>
                    <button class="btn btn-sm" onclick="filterOrdersByStatus('confirmed')" data-status="confirmed"
                        style="position: relative;">
                        Confirmed <span class="badge" id="count-confirmed"
                            style="margin-left: 0.5rem; padding: 0.125rem 0.5rem; background: var(--background); border-radius: 1rem; font-size: 0.75rem;">0</span>
                    </button>
                    <button class="btn btn-sm" onclick="filterOrdersByStatus('packed')" data-status="packed"
                        style="position: relative;">
                        Packed <span class="badge" id="count-packed"
                            style="margin-left: 0.5rem; padding: 0.125rem 0.5rem; background: var(--background); border-radius: 1rem; font-size: 0.75rem;">0</span>
                    </button>
                    <button class="btn btn-sm" onclick="filterOrdersByStatus('shipped')" data-status="shipped"
                        style="position: relative;">
                        Shipped <span class="badge" id="count-shipped"
                            style="margin-left: 0.5rem; padding: 0.125rem 0.5rem; background: var(--background); border-radius: 1rem; font-size: 0.75rem;">0</span>
                    </button>
                    <button class="btn btn-sm" onclick="filterOrdersByStatus('delivered')" data-status="delivered"
                        style="position: relative;">
                        Delivered <span class="badge" id="count-delivered"
                            style="margin-left: 0.5rem; padding: 0.125rem 0.5rem; background: var(--background); border-radius: 1rem; font-size: 0.75rem;">0</span>
                    </button>
                </div>

                <div id="ordersList">
                    <div class="card" style="text-align: center; padding: 3rem;">
                        <i class="fas fa-spinner fa-spin"
                            style="font-size: 2rem; color: var(--text-muted); margin-bottom: 1rem;"></i>
                        <p style="color: var(--text-muted);">Loading orders...</p>
                    </div>
                </div>
            </div>

            <!-- Cart Section -->
            <div class="content-section" id="cartSection">
                <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 1.5rem;">
                    <!-- Cart Items -->
                    <div class="card">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                            <h3 style="display:flex; align-items:center; gap:0.5rem; margin: 0;">
                                <i class="fas fa-shopping-cart"></i>
                                Shopping Cart
                                <span id="cartItemCount" class="badge badge-primary"
                                    style="margin-left: 0.5rem;">0</span>
                            </h3>
                            <button class="btn btn-outline btn-sm" onclick="clearCart()">
                                <i class="fas fa-trash"></i> Clear Cart
                            </button>
                        </div>
                        <div id="cartItems">
                            <!-- Cart items will be populated by renderCart() -->
                        </div>
                    </div>

                    <!-- Cart Summary -->
                    <div>
                        <div class="card" style="position: sticky; top: 6rem;">
                            <h4 style="margin-bottom: 1rem;"><i class="fas fa-receipt"></i> Order Summary</h4>
                            <div style="margin-bottom: 1rem;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                    <span>Subtotal:</span>
                                    <strong id="cartSubtotal">₱0.00</strong>
                                </div>
                                <div id="cartDiscountInfo"
                                    style="display: none; margin: 1rem 0; padding: 1rem; background: var(--success); color: white; border-radius: 8px;">
                                    <!-- Discount info will be populated here -->
                                </div>
                                <div
                                    style="display: flex; justify-content: space-between; font-size: 1.25rem; font-weight: 700; color: var(--primary); padding-top: 1rem; border-top: 2px solid var(--border);">
                                    <span>Total:</span>
                                    <span id="cartTotal">₱0.00</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" style="width: 100%;" onclick="proceedToCheckout()">
                                <i class="fas fa-credit-card"></i> Proceed to Checkout
                            </button>
                            <p
                                style="text-align: center; color: var(--text-muted); font-size: 0.85rem; margin-top: 1rem;">
                                <i class="fas fa-shield-alt"></i> Secure checkout
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Wishlist Section -->
            <div class="content-section" id="wishlistSection">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                    <h2 style="display: flex; align-items: center; gap: 0.5rem; margin: 0;">
                        <i class="fas fa-heart"></i>
                        My Wishlist
                        <span id="wishlistItemCount" class="badge badge-error" style="margin-left: 0.5rem;">0</span>
                    </h2>
                    <div style="display: flex; gap: 0.5rem;">
                        <button class="btn btn-primary" onclick="moveWishlistToCart()">
                            <i class="fas fa-cart-plus"></i> Move All to Cart
                        </button>
                        <button class="btn btn-outline" onclick="renderWishlist()">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                    </div>
                </div>
                <div id="wishlistGrid">
                    <!-- Wishlist items will be populated by renderWishlist() -->
                </div>
            </div>

            <!-- Checkout Section -->
            <div class="content-section" id="checkoutSection">
                <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 1.5rem;">
                    <!-- Checkout Form -->
                    <div class="card">
                        <h3 style="margin-bottom: 1.5rem; display:flex; align-items:center; gap:0.5rem;">
                            <i class="fas fa-credit-card"></i>
                            Checkout
                        </h3>
                        <form id="checkoutForm">
                            <div class="form-group">
                                <label class="form-label"><i class="fas fa-map-marker-alt"></i> Delivery Address
                                    *</label>
                                <textarea name="address" rows="3" class="form-input" required
                                    placeholder="Enter your complete delivery address"></textarea>
                            </div>

                            <div class="form-group">
                                <label class="form-label"><i class="fas fa-phone"></i> Contact Number *</label>
                                <input name="phone" type="tel" class="form-input" required
                                    placeholder="e.g., 09123456789" />
                            </div>

                            <div class="form-group">
                                <label class="form-label"><i class="fas fa-wallet"></i> Payment Method *</label>
                                <select name="paymentMethod" id="paymentMethodSelect" class="form-input" required onchange="togglePaymentProofFields()">
                                    <option value="cod">Cash on Delivery</option>
                                    <option value="gcash">GCash</option>
                                    <option value="bank">Bank Transfer</option>
                                </select>
                            </div>

                            <!-- Payment Proof Section (Hidden by default, shown for GCash/Bank) -->
                            <div id="paymentProofSection" style="display: none; padding: 1.5rem; background: var(--background-alt); border-radius: 0.5rem; border: 2px solid var(--warning); margin-bottom: 1rem;">
                                <h4 style="margin-bottom: 1rem; color: var(--warning); display: flex; align-items: center; gap: 0.5rem;">
                                    <i class="fas fa-exclamation-triangle"></i>
                                    Payment Proof Required
                                </h4>
                                <p style="font-size: 0.875rem; color: var(--text-muted); margin-bottom: 1rem;">
                                    Please upload your payment proof to complete your order.
                                </p>
                                
                                <div class="form-group">
                                    <label class="form-label">
                                        <i class="fas fa-receipt"></i> Payment Reference Number *
                                    </label>
                                    <input 
                                        type="text" 
                                        name="paymentReference" 
                                        id="paymentReference"
                                        class="form-input" 
                                        placeholder="e.g., GCash Ref: 1234567890 or Bank Confirmation #"
                                    />
                                    <small style="display: block; color: var(--text-muted); margin-top: 0.5rem; font-size: 0.875rem;">
                                        Enter the reference/confirmation number from your payment
                                    </small>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">
                                        <i class="fas fa-image"></i> Upload Payment Proof (Screenshot/Photo) *
                                    </label>
                                    <input 
                                        type="file" 
                                        name="paymentProof" 
                                        id="paymentProofInput"
                                        class="form-input" 
                                        accept="image/*"
                                        style="padding: 0.5rem;"
                                    />
                                    <small style="display: block; color: var(--text-muted); margin-top: 0.5rem; font-size: 0.875rem;">
                                        Accepted formats: JPG, PNG, GIF (Max 5MB)
                                    </small>
                                    <div id="paymentProofPreview" style="margin-top: 1rem; display: none;">
                                        <img id="paymentProofImage" style="max-width: 100%; max-height: 300px; border-radius: 0.5rem; border: 2px solid var(--border);" />
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="form-label">
                                    <i class="fas fa-calendar-alt"></i> Preferred Delivery Date (Optional)
                                </label>
                                <input 
                                    name="deliveryDate" 
                                    type="date" 
                                    class="form-input" 
                                    id="preferredDeliveryDate"
                                    style="cursor: pointer;"
                                />
                                <small style="display: block; color: var(--text-muted); margin-top: 0.5rem; font-size: 0.875rem;">
                                    <i class="fas fa-info-circle"></i> Leave blank for standard delivery (3 business days)
                                </small>
                            </div>

                            <div class="form-group">
                                <label class="form-label"><i class="fas fa-sticky-note"></i> Order Notes
                                    (Optional)</label>
                                <textarea name="notes" rows="2" class="form-input"
                                    placeholder="Any special instructions for your order"></textarea>
                            </div>

                            <!-- Coupon Code -->
                            <div class="form-group" style="margin-top: 1.5rem; padding: 1rem; background: var(--background-alt); border-radius: 8px;">
                                <label class="form-label" style="margin-bottom: 0.75rem;">
                                    <i class="fas fa-ticket-alt"></i> Have a Coupon Code?
                                </label>
                                <div style="display: flex; gap: 0.5rem;">
                                    <input 
                                        type="text" 
                                        id="couponCodeInput" 
                                        class="form-input" 
                                        placeholder="Enter coupon code" 
                                        style="flex: 1; text-transform: uppercase;"
                                    />
                                    <button 
                                        type="button" 
                                        class="btn btn-secondary" 
                                        onclick="applyCouponCode()"
                                        id="applyCouponBtn"
                                    >
                                        <i class="fas fa-check"></i> Apply
                                    </button>
                                </div>
                                <div id="couponMessage" style="margin-top: 0.5rem; font-size: 0.875rem;"></div>
                            </div>

                            <div style="display: flex; gap: 0.5rem; margin-top: 1.5rem;">
                                <button type="submit" class="btn btn-primary" style="flex: 1;">
                                    <i class="fas fa-check-circle"></i> Place Order
                                </button>
                                <button type="button" class="btn btn-outline" onclick="switchTab('cart')">
                                    <i class="fas fa-arrow-left"></i> Back to Cart
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- Order Summary -->
                    <div id="checkoutSummary">
                        <!-- Summary will be populated by renderCheckoutSummary() -->
                    </div>
                </div>
            </div>

            <!-- Transactions Section -->
            <div class="content-section" id="transactionsSection">
                <!-- Transaction Summary Widgets -->
                <div id="transactionSummary"
                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
                    <!-- Summary widgets will be populated by JavaScript -->
                </div>

                <!-- Transaction Header with Actions -->
                <div
                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem;">
                    <h2 style="display: flex; align-items: center; gap: 0.5rem;" id="transactionSectionTitle">
                        <i class="fas fa-file-invoice-dollar"></i>
                        Transaction Management
                    </h2>
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                        <button class="btn btn-secondary" onclick="exportTransactions()" title="Export transactions">
                            <i class="fas fa-download"></i> Export
                        </button>
                        <button class="btn btn-secondary" onclick="printTransactions()" title="Print transactions">
                            <i class="fas fa-print"></i> Print
                        </button>
                        <button class="btn btn-primary" onclick="refreshTransactions()" title="Refresh data">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                    </div>
                </div>

                <!-- Enhanced Filters -->
                <div class="card" id="transactionFilters" style="margin-bottom: 2rem;">
                    <h4 style="margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.5rem;">
                        <i class="fas fa-filter"></i>
                        Filter Transactions
                    </h4>
                    <div
                        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 1rem;">
                        <div>
                            <label class="form-label">Transaction Status</label>
                            <select id="transactionStatusFilter" class="form-input" title="Filter by status">
                                <option value="">All Status</option>
                                <option value="completed">Completed</option>
                                <option value="pending">Pending</option>
                                <option value="failed">Failed</option>
                                <option value="refunded">Refunded</option>
                                <option value="cancelled">Cancelled</option>
                            </select>
                        </div>
                        <div>
                            <label class="form-label">Payment Method</label>
                            <select id="transactionPaymentFilter" class="form-input" title="Filter by payment method">
                                <option value="">All Methods</option>
                                <option value="gcash">GCash</option>
                                <option value="cod">Cash on Delivery</option>
                                <option value="bank">Bank Transfer</option>
                                <option value="card">Credit/Debit Card</option>
                                <option value="paypal">PayPal</option>
                            </select>
                        </div>
                        <div>
                            <label class="form-label">Transaction Type</label>
                            <select id="transactionTypeFilter" class="form-input" title="Filter by type">
                                <option value="">All Types</option>
                                <option value="sale">Sale</option>
                                <option value="refund">Refund</option>
                                <option value="payout">Payout</option>
                                <option value="fee">Fee</option>
                            </select>
                        </div>
                        <div>
                            <label class="form-label">Amount Range</label>
                            <select id="transactionAmountFilter" class="form-input" title="Filter by amount">
                                <option value="">All Amounts</option>
                                <option value="0-100">₱0 - ₱100</option>
                                <option value="100-500">₱100 - ₱500</option>
                                <option value="500-1000">₱500 - ₱1,000</option>
                                <option value="1000-5000">₱1,000 - ₱5,000</option>
                                <option value="5000+">₱5,000+</option>
                            </select>
                        </div>
                    </div>
                    <div
                        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;">
                        <div>
                            <label class="form-label">Date From</label>
                            <input type="date" id="transactionDateFrom" class="form-input" title="Start date">
                        </div>
                        <div>
                            <label class="form-label">Date To</label>
                            <input type="date" id="transactionDateTo" class="form-input" title="End date">
                        </div>
                        <div>
                            <label class="form-label">Search</label>
                            <input type="text" id="transactionSearchFilter" class="form-input"
                                placeholder="Search by ID, customer, reference..." title="Search transactions">
                        </div>
                        <div style="display: flex; gap: 0.5rem; align-items: end;">
                            <button class="btn btn-primary" onclick="applyTransactionFilters()" title="Apply filters">
                                <i class="fas fa-search"></i> Apply
                            </button>
                            <button class="btn btn-secondary" onclick="clearTransactionFilters()"
                                title="Clear all filters">
                                <i class="fas fa-times"></i> Clear
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Transaction List -->
                <div id="transactionsList">
                    <!-- Transactions will be populated by JavaScript -->
                </div>
            </div>



            <!-- CLIENT Transactions Section -->
            <div class="content-section" id="clientTransactionsSection">
                <!-- Header -->
                <div
                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem;">
                    <div>
                        <h2 style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                            <i class="fas fa-shopping-bag"></i>
                            My Orders & Purchases
                        </h2>
                        <p style="color: var(--text-muted); font-size: 0.95rem;">Track your orders and purchase history
                        </p>
                    </div>
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                        <button class="btn btn-primary" onclick="loadClientTransactions()">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                    </div>
                </div>

                <!-- Purchase Summary Cards -->
                <div
                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
                    <div class="card"
                        style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(5, 150, 105, 0.05)); border-left: 4px solid var(--success);">
                        <div
                            style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem;">
                            <div
                                style="width: 48px; height: 48px; background: var(--success); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-check-circle" style="color: white; font-size: 1.5rem;"></i>
                            </div>
                            <div style="font-size: 0.875rem; color: var(--success); font-weight: 600;">This Month</div>
                        </div>
                        <div style="font-size: 2.5rem; font-weight: bold; color: var(--success); margin-bottom: 0.5rem;"
                            id="clientCompletedOrders">0</div>
                        <div style="color: var(--text-muted); font-size: 0.95rem;">Completed Orders</div>
                    </div>

                    <div class="card"
                        style="background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(217, 119, 6, 0.05)); border-left: 4px solid var(--warning);">
                        <div
                            style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem;">
                            <div
                                style="width: 48px; height: 48px; background: var(--warning); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-clock" style="color: white; font-size: 1.5rem;"></i>
                            </div>
                            <div style="font-size: 0.875rem; color: var(--warning); font-weight: 600;">Active</div>
                        </div>
                        <div style="font-size: 2.5rem; font-weight: bold; color: var(--warning); margin-bottom: 0.5rem;"
                            id="clientPendingOrdersCount">0</div>
                        <div style="color: var(--text-muted); font-size: 0.95rem;">Pending Orders</div>
                    </div>

                    <div class="card"
                        style="background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(37, 99, 235, 0.05)); border-left: 4px solid var(--primary);">
                        <div
                            style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem;">
                            <div
                                style="width: 48px; height: 48px; background: var(--primary); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-peso-sign" style="color: white; font-size: 1.5rem;"></i>
                            </div>
                            <div style="font-size: 0.875rem; color: var(--primary); font-weight: 600;">Total</div>
                        </div>
                        <div style="font-size: 2.5rem; font-weight: bold; color: var(--primary); margin-bottom: 0.5rem;"
                            id="clientTotalPurchases">₱0</div>
                        <div style="color: var(--text-muted); font-size: 0.95rem;">Total Purchases</div>
                    </div>

                    <div class="card"
                        style="background: linear-gradient(135deg, rgba(168, 85, 247, 0.1), rgba(147, 51, 234, 0.05)); border-left: 4px solid #a855f7;">
                        <div
                            style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem;">
                            <div
                                style="width: 48px; height: 48px; background: #a855f7; border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-gift" style="color: white; font-size: 1.5rem;"></i>
                            </div>
                            <div style="font-size: 0.875rem; color: #a855f7; font-weight: 600;">Saved</div>
                        </div>
                        <div style="font-size: 2.5rem; font-weight: bold; color: #a855f7; margin-bottom: 0.5rem;"
                            id="clientTotalDiscounts">₱0</div>
                        <div style="color: var(--text-muted); font-size: 0.95rem;">Total Discounts</div>
                    </div>
                </div>

                <!-- Quick Filters -->
                <div class="card" style="margin-bottom: 2rem;">
                    <div
                        style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1.5rem; flex-wrap: wrap; gap: 1rem;">
                        <h4 style="display: flex; align-items: center; gap: 0.5rem; margin: 0;">
                            <i class="fas fa-filter"></i>
                            Filter Orders
                        </h4>
                        <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                            <button class="btn btn-sm" onclick="filterClientOrders('all')" id="filterAll"
                                style="background: var(--primary); color: white;">
                                All Orders
                            </button>
                            <button class="btn btn-sm btn-secondary" onclick="filterClientOrders('pending')"
                                id="filterPending">
                                Pending
                            </button>
                            <button class="btn btn-sm btn-secondary" onclick="filterClientOrders('processing')"
                                id="filterProcessing">
                                Processing
                            </button>
                            <button class="btn btn-sm btn-secondary" onclick="filterClientOrders('shipped')"
                                id="filterShipped">
                                Shipped
                            </button>
                            <button class="btn btn-sm btn-secondary" onclick="filterClientOrders('delivered')"
                                id="filterDelivered">
                                Delivered
                            </button>
                        </div>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                        <div>
                            <label class="form-label">Search Orders</label>
                            <input type="text" id="clientOrderSearch" class="form-input"
                                placeholder="Search by order ID, product name..." onkeyup="searchClientOrders()">
                        </div>
                        <div>
                            <label class="form-label">Date Range</label>
                            <select id="clientOrderDateRange" class="form-input" onchange="loadClientTransactions()">
                                <option value="7">Last 7 Days</option>
                                <option value="30" selected>Last 30 Days</option>
                                <option value="90">Last 3 Months</option>
                                <option value="365">Last Year</option>
                                <option value="all">All Time</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Orders List -->
                <div id="clientOrdersList">
                    <div style="padding: 3rem; text-align: center; color: var(--text-muted);">
                        <i class="fas fa-shopping-bag" style="font-size: 3rem; opacity: 0.3; margin-bottom: 1rem;"></i>
                        <p style="font-size: 1.1rem;">Loading your orders...</p>
                    </div>
                </div>

                <!-- Empty State -->
                <div id="clientOrdersEmpty" style="display: none; padding: 3rem; text-align: center;">
                    <i class="fas fa-shopping-cart"
                        style="font-size: 4rem; color: var(--text-muted); opacity: 0.3; margin-bottom: 1rem;"></i>
                    <h3 style="color: var(--text-muted); margin-bottom: 1rem;">No Orders Yet</h3>
                    <p style="color: var(--text-muted); margin-bottom: 2rem;">Start shopping to see your orders here!
                    </p>
                    <button class="btn btn-primary" onclick="switchTab('products')">
                        <i class="fas fa-shopping-bag"></i> Browse Products
                    </button>
                </div>
            </div>


            <!-- Inventory Section -->
            <div class="content-section" id="inventorySection">
                <div
                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem;">
                    <h2 style="display: flex; align-items: center; gap: 0.5rem;">
                        <i class="fas fa-warehouse"></i>
                        Inventory Management
                    </h2>
                    <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                        <button class="btn btn-primary" onclick="openRestockWithBatchModal()" id="restockBatchBtn">
                            <i class="fas fa-boxes"></i> Restock with Batch
                        </button>
                        <button class="btn btn-success" onclick="openAddStockModal()" id="addStockBtn">
                            <i class="fas fa-plus"></i> Add Stock
                        </button>
                        <button class="btn btn-error" onclick="openRemoveStockModal()" id="removeStockBtn">
                            <i class="fas fa-minus"></i> Remove Stock
                        </button>
                        <button class="btn btn-secondary" onclick="exportInventoryCSV()">
                            <i class="fas fa-file-csv"></i> Export CSV
                        </button>
                        <button class="btn btn-secondary" onclick="viewRestockHistory()">
                            <i class="fas fa-history"></i> History
                        </button>
                    </div>
                </div>

                <!-- Low Stock Alerts -->
                <div class="card" id="lowStockAlertsCard" style="margin-bottom: 2rem; display: none;">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <h3 style="display: flex; align-items: center; gap: 0.5rem; margin: 0;">
                            <i class="fas fa-exclamation-triangle" style="color: var(--warning);"></i>
                            Low Stock Alerts
                        </h3>
                        <button class="btn btn-sm btn-secondary" onclick="dismissAlerts()">
                            <i class="fas fa-times"></i> Dismiss
                        </button>
                    </div>
                    <div id="lowStockAlertsList" style="display: flex; flex-direction: column; gap: 0.75rem;">
                        <!-- Alerts will be populated here -->
                    </div>
                </div>

                <!-- Filters and Search -->
                <div class="card" style="margin-bottom: 2rem;">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                        <div class="form-group" style="margin: 0;">
                            <label class="form-label">Search</label>
                            <input type="text" id="inventorySearch" class="form-input" placeholder="Search products..."
                                onkeyup="filterInventory()">
                        </div>
                        <div class="form-group" style="margin: 0;">
                            <label class="form-label">Category</label>
                            <select id="inventoryCategory" class="form-input" onchange="filterInventory()">
                                <option value="all">All Categories</option>
                                <option value="chicken">Chicken</option>
                                <option value="beef">Beef</option>
                                <option value="pork">Pork</option>
                                <option value="seafood">Seafood</option>
                                <option value="vegetables">Vegetables</option>
                                <option value="dairy">Dairy</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="form-group" style="margin: 0;">
                            <label class="form-label">Stock Status</label>
                            <select id="inventoryStatus" class="form-input" onchange="filterInventory()">
                                <option value="all">All Status</option>
                                <option value="good">Good Stock</option>
                                <option value="low">Low Stock</option>
                                <option value="out">Out of Stock</option>
                            </select>
                        </div>
                        <div class="form-group" style="margin: 0;">
                            <label class="form-label">Sort By</label>
                            <select id="inventorySort" class="form-input" onchange="filterInventory()">
                                <option value="name">Name (A-Z)</option>
                                <option value="-name">Name (Z-A)</option>
                                <option value="stock">Stock (Low to High)</option>
                                <option value="-stock">Stock (High to Low)</option>
                                <option value="-createdAt">Newest First</option>
                                <option value="createdAt">Oldest First</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Inventory List -->
                <div class="card">
                    <h3 style="margin-bottom: 1.5rem;">Stock Levels Overview</h3>
                    <div id="inventoryList" style="display: flex; flex-direction: column; gap: 1rem;">
                        <div style="text-align: center; padding: 2rem; color: var(--text-muted);">
                            <i class="fas fa-spinner fa-spin" style="font-size: 2rem; margin-bottom: 0.5rem;"></i>
                            <p>Loading inventory...</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Expiry Tracker Section -->
            <div class="content-section" id="expiry-trackerSection">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem;">
                    <h2 style="margin: 0; display: flex; align-items: center; gap: 0.5rem;">
                        <i class="fas fa-calendar-times"></i>
                        Expiry Tracker
                    </h2>
                    <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                        <button class="btn btn-secondary" onclick="loadExpiryDashboard()">
                            <i class="fas fa-sync"></i> Refresh
                        </button>
                    </div>
                </div>

                <!-- Expiry Dashboard Container -->
                <div id="expiryDashboardContainer">
                    <div style="text-align: center; padding: 3rem;">
                        <i class="fas fa-spinner fa-spin" style="font-size: 3rem; color: var(--primary-color);"></i>
                        <p style="margin-top: 1rem; color: var(--text-muted);">Loading expiry data...</p>
                    </div>
                </div>
            </div>

            <!-- Admin Analytics Section -->
            <div class="content-section" id="analyticsSection">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <h2 style="display: flex; align-items: center; gap: 0.5rem;">
                        <i class="fas fa-chart-bar"></i>
                        Analytics & Reports
                    </h2>
                    <div style="display: flex; gap: 1rem;">
                        <select class="form-input" id="analyticsTimeRange" onchange="updateAnalyticsCharts()">
                            <option value="7">Last 7 Days</option>
                            <option value="30">Last 30 Days</option>
                            <option value="90">Last 3 Months</option>
                            <option value="365">Last Year</option>
                        </select>
                        <button class="btn btn-secondary" onclick="exportAnalytics()">
                            <i class="fas fa-download"></i> Export Report
                        </button>
                        <button class="btn btn-primary" onclick="refreshAnalytics()">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 1.5rem;">
                    <div class="card">
                        <h3 style="margin-bottom: 1rem;">Sales Performance</h3>
                        <div style="height: 250px;">
                            <canvas id="salesChart"></canvas>
                        </div>
                    </div>

                    <div class="card">
                        <h3 style="margin-bottom: 1rem;">Top Products</h3>
                        <div id="topProducts" style="max-height: 250px; overflow-y: auto;">
                            <div style="padding: 2rem; text-align: center; color: var(--text-muted);">
                                <i class="fas fa-chart-bar"
                                    style="font-size: 2rem; opacity: 0.3; margin-bottom: 0.5rem;"></i>
                                <p>Loading top products...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Additional Analytics Charts -->
                <div
                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 1.5rem; margin-top: 1.5rem;">
                    <div class="card">
                        <h3 style="margin-bottom: 1rem;">Revenue by Category</h3>
                        <div style="height: 250px;">
                            <canvas id="categoryChart"></canvas>
                        </div>
                    </div>

                    <div class="card">
                        <h3 style="margin-bottom: 1rem;">Order Status Distribution</h3>
                        <div style="height: 250px;">
                            <canvas id="orderStatusChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Revenue Metrics -->
                <div class="card" style="margin-top: 2rem;">
                    <h3 style="margin-bottom: 1.5rem;">
                        <i class="fas fa-chart-line"></i> Revenue Performance
                    </h3>
                    <div id="revenueMetrics">
                        <!-- Revenue metrics will be populated here -->
                    </div>
                </div>

                <!-- Smart Insights -->
                <div class="card" style="margin-top: 2rem;">
                    <h3 style="margin-bottom: 1.5rem;">
                        <i class="fas fa-lightbulb"></i> Smart Insights
                    </h3>
                    <div id="insightsContainer">
                        <!-- Insights will be populated here -->
                    </div>
                </div>

                <!-- Order Tracking Section -->
                <div class="card" style="margin-top: 2rem;">
                    <h3 style="margin-bottom: 1.5rem;">Recent Orders Tracking</h3>
                    <div id="orderTrackingList">
                        <!-- Order tracking items will be populated here -->
                    </div>
                </div>

                <!-- Performance Metrics -->
                <div class="card" style="margin-top: 2rem;">
                    <h3 style="margin-bottom: 1.5rem;">Performance Metrics</h3>
                    <div
                        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem;">
                        <div
                            style="text-align: center; padding: 1.5rem; background: var(--background); border-radius: 0.75rem;">
                            <div id="perfTotalRevenue"
                                style="font-size: 2rem; font-weight: bold; color: var(--success); margin-bottom: 0.5rem;">
                                ₱0</div>
                            <div style="color: var(--text-muted);">Total Revenue</div>
                            <div id="perfRevenueChange"
                                style="font-size: 0.875rem; color: var(--text-muted); margin-top: 0.5rem;">-</div>
                        </div>
                        <div
                            style="text-align: center; padding: 1.5rem; background: var(--background); border-radius: 0.75rem;">
                            <div id="perfOrdersProcessed"
                                style="font-size: 2rem; font-weight: bold; color: var(--primary); margin-bottom: 0.5rem;">
                                0</div>
                            <div style="color: var(--text-muted);">Orders Processed</div>
                            <div id="perfOrdersChange"
                                style="font-size: 0.875rem; color: var(--text-muted); margin-top: 0.5rem;">-</div>
                        </div>
                        <div
                            style="text-align: center; padding: 1.5rem; background: var(--background); border-radius: 0.75rem;">
                            <div id="perfAvgOrderValue"
                                style="font-size: 2rem; font-weight: bold; color: var(--warning); margin-bottom: 0.5rem;">
                                ₱0</div>
                            <div style="color: var(--text-muted);">Average Order Value</div>
                            <div id="perfAvgChange"
                                style="font-size: 0.875rem; color: var(--text-muted); margin-top: 0.5rem;">-</div>
                        </div>
                        <div
                            style="text-align: center; padding: 1.5rem; background: var(--background); border-radius: 0.75rem;">
                            <div id="perfCustomerSat"
                                style="font-size: 2rem; font-weight: bold; color: var(--info); margin-bottom: 0.5rem;">-
                            </div>
                            <div style="color: var(--text-muted);">Customer Satisfaction</div>
                            <div id="perfSatChange"
                                style="font-size: 0.875rem; color: var(--text-muted); margin-top: 0.5rem;">-</div>
                        </div>
                    </div>
                </div>

                <!-- Customer Reviews Section -->
                <div class="card" style="margin-top: 2rem;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                        <h3 style="margin: 0; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-star"></i> Customer Reviews
                        </h3>
                        <div style="display: flex; gap: 1rem; align-items: center;">
                            <select class="form-input" id="reviewsFilter" onchange="loadAllReviewsForAdmin()" style="width: 150px;">
                                <option value="all">All Reviews</option>
                                <option value="5">5 Stars</option>
                                <option value="4">4 Stars</option>
                                <option value="3">3 Stars</option>
                                <option value="2">2 Stars</option>
                                <option value="1">1 Star</option>
                            </select>
                            <button class="btn btn-primary" onclick="loadAllReviewsForAdmin()">
                                <i class="fas fa-sync-alt"></i> Refresh
                            </button>
                        </div>
                    </div>
                    <div id="adminReviewsList">
                        <div style="text-align: center; padding: 2rem; color: var(--text-muted);">
                            <i class="fas fa-spinner fa-spin" style="font-size: 2rem; margin-bottom: 0.5rem;"></i>
                            <p>Loading reviews...</p>
                        </div>
                    </div>
                </div>

                <div class="card" style="margin-top: 2rem;">
                    <h3 style="margin-bottom: 1.5rem;">Smart Insights</h3>
                    <div
                        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">
                        <div
                            style="padding: 1.5rem; background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(5, 150, 105, 0.1)); border-radius: 0.75rem; border: 1px solid rgba(16, 185, 129, 0.2);">
                            <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem;">
                                <i class="fas fa-lightbulb" style="color: var(--success); font-size: 1.5rem;"></i>
                                <h4>Reorder Suggestion</h4>
                            </div>
                            <p style="color: var(--text-muted); margin-bottom: 0.5rem;">Based on sales trends, consider
                                restocking Salmon Fillet within 2 days.</p>
                            <button class="btn btn-primary" style="padding: 0.5rem 1rem; font-size: 0.875rem;"
                                onclick="createPurchaseOrder()">
                                Create Purchase Order
                            </button>
                        </div>

                        <!-- Dynamic Expiry Alert (Integrated with Expiry Tracker) -->
                        <div id="expiryAlertCard"
                            style="padding: 1.5rem; background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(217, 119, 6, 0.1)); border-radius: 0.75rem; border: 1px solid rgba(245, 158, 11, 0.2); display: none;">
                            <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem;">
                                <i class="fas fa-calendar-times" style="color: var(--warning); font-size: 1.5rem;"></i>
                                <h4>Expiry Alert</h4>
                            </div>
                            <p id="expiryAlertText" style="color: var(--text-muted); margin-bottom: 0.5rem;">
                                Loading expiry data...
                            </p>
                            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                                <button class="btn btn-warning" style="padding: 0.5rem 1rem; font-size: 0.875rem;"
                                    onclick="switchTab('expiry-tracker')">
                                    <i class="fas fa-eye"></i> View Expiry Tracker
                                </button>
                                <button class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.875rem;"
                                    onclick="quickApplyExpiryDiscounts()">
                                    <i class="fas fa-tag"></i> Apply Discounts
                                </button>
                            </div>
                        </div>

                        <div
                            style="padding: 1.5rem; background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(37, 99, 235, 0.1)); border-radius: 0.75rem; border: 1px solid rgba(59, 130, 246, 0.2);">
                            <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem;">
                                <i class="fas fa-chart-line" style="color: var(--info); font-size: 1.5rem;"></i>
                                <h4>Sales Trend</h4>
                            </div>
                            <p style="color: var(--text-muted); margin-bottom: 0.5rem;">Weekend sales are 25% higher.
                                Consider weekend promotions.</p>
                            <button class="btn btn-info" style="padding: 0.5rem 1rem; font-size: 0.875rem;"
                                onclick="createWeekendPromotion()">
                                Create Weekend Promo
                            </button>
                        </div>

                        <div
                            style="padding: 1.5rem; background: linear-gradient(135deg, rgba(168, 85, 247, 0.1), rgba(147, 51, 234, 0.1)); border-radius: 0.75rem; border: 1px solid rgba(168, 85, 247, 0.2);">
                            <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem;">
                                <i class="fas fa-users" style="color: #a855f7; font-size: 1.5rem;"></i>
                                <h4>Customer Insights</h4>
                            </div>
                            <p style="color: var(--text-muted); margin-bottom: 0.5rem;">New customers prefer bulk
                                purchases. Consider bulk discounts.</p>
                            <button class="btn btn-dark" style="padding: 0.5rem 1rem; font-size: 0.875rem;"
                                onclick="switchTab('promotions')">
                                Manage Bulk Discounts
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ENHANCED Client Analytics Section -->
            <div class="content-section" id="clientAnalyticsSection">
                <!-- Header -->
                <div
                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem;">
                    <div>
                        <h2 style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                            <i class="fas fa-chart-line"></i>
                            My Shopping Dashboard
                        </h2>
                        <p style="color: var(--text-muted); font-size: 0.95rem;">Track your spending, discover patterns,
                            and save more</p>
                    </div>
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                        <select class="form-input" id="clientAnalyticsTimeRange" onchange="loadClientAnalytics()"
                            style="min-width: 150px;">
                            <option value="7">Last 7 Days</option>
                            <option value="30" selected>Last 30 Days</option>
                            <option value="90">Last 3 Months</option>
                            <option value="365">Last Year</option>
                            <option value="all">All Time</option>
                        </select>
                        <button class="btn btn-primary" onclick="loadClientAnalytics()">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                    </div>
                </div>

                <!-- Main Stats Cards -->
                <div
                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
                    <div class="card"
                        style="background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(37, 99, 235, 0.05)); border-left: 4px solid var(--primary);">
                        <div
                            style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem;">
                            <div
                                style="width: 48px; height: 48px; background: var(--primary); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-shopping-bag" style="color: white; font-size: 1.5rem;"></i>
                            </div>
                            <div id="clientOrdersChange"
                                style="font-size: 0.875rem; color: var(--success); font-weight: 600;">-</div>
                        </div>
                        <div style="font-size: 2.5rem; font-weight: bold; color: var(--primary); margin-bottom: 0.5rem;"
                            id="clientTotalOrders">0</div>
                        <div style="color: var(--text-muted); font-size: 0.95rem;">Total Orders</div>
                    </div>

                    <div class="card"
                        style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(5, 150, 105, 0.05)); border-left: 4px solid var(--success);">
                        <div
                            style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem;">
                            <div
                                style="width: 48px; height: 48px; background: var(--success); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-peso-sign" style="color: white; font-size: 1.5rem;"></i>
                            </div>
                            <div id="clientSpentChange"
                                style="font-size: 0.875rem; color: var(--success); font-weight: 600;">-</div>
                        </div>
                        <div style="font-size: 2.5rem; font-weight: bold; color: var(--success); margin-bottom: 0.5rem;"
                            id="clientTotalSpent">₱0</div>
                        <div style="color: var(--text-muted); font-size: 0.95rem;">Total Spent</div>
                    </div>

                    <div class="card"
                        style="background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(217, 119, 6, 0.05)); border-left: 4px solid var(--warning);">
                        <div
                            style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem;">
                            <div
                                style="width: 48px; height: 48px; background: var(--warning); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-chart-line" style="color: white; font-size: 1.5rem;"></i>
                            </div>
                            <div id="clientAvgChange"
                                style="font-size: 0.875rem; color: var(--success); font-weight: 600;">-</div>
                        </div>
                        <div style="font-size: 2.5rem; font-weight: bold; color: var(--warning); margin-bottom: 0.5rem;"
                            id="clientAvgOrder">₱0</div>
                        <div style="color: var(--text-muted); font-size: 0.95rem;">Average Order Value</div>
                    </div>

                    <div class="card"
                        style="background: linear-gradient(135deg, rgba(168, 85, 247, 0.1), rgba(147, 51, 234, 0.05)); border-left: 4px solid #a855f7;">
                        <div
                            style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem;">
                            <div
                                style="width: 48px; height: 48px; background: #a855f7; border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-piggy-bank" style="color: white; font-size: 1.5rem;"></i>
                            </div>
                            <div id="clientSavingsPercent"
                                style="font-size: 0.875rem; color: var(--success); font-weight: 600;">-</div>
                        </div>
                        <div style="font-size: 2.5rem; font-weight: bold; color: #a855f7; margin-bottom: 0.5rem;"
                            id="clientSavings">₱0</div>
                        <div style="color: var(--text-muted); font-size: 0.95rem;">Total Savings</div>
                    </div>
                </div>

                <!-- Charts Row -->
                <div
                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(450px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
                    <div class="card">
                        <div
                            style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1.5rem;">
                            <h3 style="display: flex; align-items: center; gap: 0.5rem; margin: 0;">
                                <i class="fas fa-chart-area" style="color: var(--primary);"></i>
                                My Spending Trend
                            </h3>
                            <span id="clientSpendingTrend"
                                style="font-size: 0.875rem; color: var(--text-muted);">-</span>
                        </div>
                        <div style="height: 300px; position: relative;">
                            <canvas id="clientSpendingChart"></canvas>
                        </div>
                    </div>

                    <div class="card">
                        <div
                            style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1.5rem;">
                            <h3 style="display: flex; align-items: center; gap: 0.5rem; margin: 0;">
                                <i class="fas fa-chart-pie" style="color: var(--success);"></i>
                                Category Breakdown
                            </h3>
                            <span id="clientTopCategory" style="font-size: 0.875rem; color: var(--text-muted);">-</span>
                        </div>
                        <div style="height: 300px; position: relative;">
                            <canvas id="clientCategoryChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Shopping Activity Timeline -->
                <div class="card" style="margin-bottom: 2rem;">
                    <h3 style="margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.5rem;">
                        <i class="fas fa-clock" style="color: var(--info);"></i>
                        Shopping Activity Timeline
                    </h3>
                    <div id="clientActivityTimeline" style="min-height: 200px;">
                        <div style="padding: 2rem; text-align: center; color: var(--text-muted);">
                            <i class="fas fa-calendar-alt"
                                style="font-size: 2rem; opacity: 0.3; margin-bottom: 0.5rem;"></i>
                            <p>Loading your shopping activity...</p>
                        </div>
                    </div>
                </div>

                <!-- Top Products Grid -->
                <div class="card" style="margin-bottom: 2rem;">
                    <div
                        style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1.5rem;">
                        <h3 style="display: flex; align-items: center; gap: 0.5rem; margin: 0;">
                            <i class="fas fa-star" style="color: var(--warning);"></i>
                            My Favorite Products
                        </h3>
                        <button class="btn btn-sm btn-secondary" onclick="switchTab('products')">
                            <i class="fas fa-shopping-cart"></i> Shop Again
                        </button>
                    </div>
                    <div id="clientTopProducts"
                        style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 1rem;">
                        <div style="padding: 2rem; text-align: center; color: var(--text-muted); grid-column: 1/-1;">
                            <i class="fas fa-shopping-bag"
                                style="font-size: 2rem; opacity: 0.3; margin-bottom: 0.5rem;"></i>
                            <p>Loading your favorite products...</p>
                        </div>
                    </div>
                </div>

                <!-- Order Status & Recent Orders -->
                <div
                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
                    <!-- Order Status -->
                    <div class="card">
                        <h3 style="margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-box" style="color: var(--primary);"></i>
                            Order Status Overview
                        </h3>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                            <div
                                style="text-align: center; padding: 1.5rem; background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(217, 119, 6, 0.05)); border-radius: 0.75rem; border: 2px solid rgba(245, 158, 11, 0.2);">
                                <i class="fas fa-clock"
                                    style="font-size: 2rem; color: var(--warning); margin-bottom: 0.5rem;"></i>
                                <div id="clientPendingOrders"
                                    style="font-size: 2.5rem; font-weight: bold; color: var(--warning); margin: 0.5rem 0;">
                                    0</div>
                                <div style="color: var(--text-muted); font-weight: 600;">Pending</div>
                            </div>
                            <div
                                style="text-align: center; padding: 1.5rem; background: linear-gradient(135deg, rgba(6, 182, 212, 0.1), rgba(8, 145, 178, 0.05)); border-radius: 0.75rem; border: 2px solid rgba(6, 182, 212, 0.2);">
                                <i class="fas fa-cog fa-spin"
                                    style="font-size: 2rem; color: var(--info); margin-bottom: 0.5rem;"></i>
                                <div id="clientProcessingOrders"
                                    style="font-size: 2.5rem; font-weight: bold; color: var(--info); margin: 0.5rem 0;">
                                    0</div>
                                <div style="color: var(--text-muted); font-weight: 600;">Processing</div>
                            </div>
                            <div
                                style="text-align: center; padding: 1.5rem; background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(37, 99, 235, 0.05)); border-radius: 0.75rem; border: 2px solid rgba(59, 130, 246, 0.2);">
                                <i class="fas fa-shipping-fast"
                                    style="font-size: 2rem; color: var(--primary); margin-bottom: 0.5rem;"></i>
                                <div id="clientShippedOrders"
                                    style="font-size: 2.5rem; font-weight: bold; color: var(--primary); margin: 0.5rem 0;">
                                    0</div>
                                <div style="color: var(--text-muted); font-weight: 600;">Shipped</div>
                            </div>
                            <div
                                style="text-align: center; padding: 1.5rem; background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(5, 150, 105, 0.05)); border-radius: 0.75rem; border: 2px solid rgba(16, 185, 129, 0.2);">
                                <i class="fas fa-check-circle"
                                    style="font-size: 2rem; color: var(--success); margin-bottom: 0.5rem;"></i>
                                <div id="clientDeliveredOrders"
                                    style="font-size: 2.5rem; font-weight: bold; color: var(--success); margin: 0.5rem 0;">
                                    0</div>
                                <div style="color: var(--text-muted); font-weight: 600;">Delivered</div>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Orders -->
                    <div class="card">
                        <div
                            style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1.5rem;">
                            <h3 style="display: flex; align-items: center; gap: 0.5rem; margin: 0;">
                                <i class="fas fa-history" style="color: var(--success);"></i>
                                Recent Orders
                            </h3>
                            <button class="btn btn-sm btn-secondary" onclick="switchTab('orders')">
                                View All
                            </button>
                        </div>
                        <div id="clientRecentOrders" style="max-height: 300px; overflow-y: auto;">
                            <div style="padding: 2rem; text-align: center; color: var(--text-muted);">
                                <i class="fas fa-receipt"
                                    style="font-size: 2rem; opacity: 0.3; margin-bottom: 0.5rem;"></i>
                                <p>Loading recent orders...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Personalized Insights -->
                <div class="card" style="margin-bottom: 2rem;">
                    <h3 style="margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.5rem;">
                        <i class="fas fa-lightbulb" style="color: var(--warning);"></i>
                        Personalized Insights & Recommendations
                    </h3>
                    <div id="clientInsights"
                        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 1.5rem;">
                        <div
                            style="padding: 1.5rem; background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(5, 150, 105, 0.05)); border-radius: 0.75rem; border: 2px solid rgba(16, 185, 129, 0.2);">
                            <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem;">
                                <div
                                    style="width: 40px; height: 40px; background: var(--success); border-radius: 10px; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-shopping-cart" style="color: white; font-size: 1.25rem;"></i>
                                </div>
                                <h4 style="margin: 0;">Shopping Pattern</h4>
                            </div>
                            <p style="color: var(--text-muted); line-height: 1.6;">Loading your shopping patterns...</p>
                        </div>

                        <div
                            style="padding: 1.5rem; background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(217, 119, 6, 0.05)); border-radius: 0.75rem; border: 2px solid rgba(245, 158, 11, 0.2);">
                            <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem;">
                                <div
                                    style="width: 40px; height: 40px; background: var(--warning); border-radius: 10px; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-percentage" style="color: white; font-size: 1.25rem;"></i>
                                </div>
                                <h4 style="margin: 0;">Savings Opportunity</h4>
                            </div>
                            <p style="color: var(--text-muted); line-height: 1.6;">Checking for available discounts...
                            </p>
                        </div>

                        <div
                            style="padding: 1.5rem; background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(37, 99, 235, 0.05)); border-radius: 0.75rem; border: 2px solid rgba(59, 130, 246, 0.2);">
                            <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem;">
                                <div
                                    style="width: 40px; height: 40px; background: var(--info); border-radius: 10px; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-star" style="color: white; font-size: 1.25rem;"></i>
                                </div>
                                <h4 style="margin: 0;">Recommendations</h4>
                            </div>
                            <p style="color: var(--text-muted); line-height: 1.6;">Finding products you might like...
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Shopping Habits & Stats -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">
                    <div class="card"
                        style="background: linear-gradient(135deg, rgba(168, 85, 247, 0.1), rgba(147, 51, 234, 0.05));">
                        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                            <div
                                style="width: 48px; height: 48px; background: #a855f7; border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-calendar-week" style="color: white; font-size: 1.5rem;"></i>
                            </div>
                            <div>
                                <div style="font-size: 0.875rem; color: var(--text-muted);">Shopping Frequency</div>
                                <div id="clientShoppingFrequency"
                                    style="font-size: 1.5rem; font-weight: bold; color: #a855f7;">-</div>
                            </div>
                        </div>
                        <p style="color: var(--text-muted); font-size: 0.9rem; margin: 0;">Average orders per week</p>
                    </div>

                    <div class="card"
                        style="background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(220, 38, 38, 0.05));">
                        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                            <div
                                style="width: 48px; height: 48px; background: var(--error); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-fire" style="color: white; font-size: 1.5rem;"></i>
                            </div>
                            <div>
                                <div style="font-size: 0.875rem; color: var(--text-muted);">Best Shopping Day</div>
                                <div id="clientBestDay"
                                    style="font-size: 1.5rem; font-weight: bold; color: var(--error);">-</div>
                            </div>
                        </div>
                        <p style="color: var(--text-muted); font-size: 0.9rem; margin: 0;">Your most active shopping day
                        </p>
                    </div>

                    <div class="card"
                        style="background: linear-gradient(135deg, rgba(6, 182, 212, 0.1), rgba(8, 145, 178, 0.05));">
                        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                            <div
                                style="width: 48px; height: 48px; background: var(--info); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-trophy" style="color: white; font-size: 1.5rem;"></i>
                            </div>
                            <div>
                                <div style="font-size: 0.875rem; color: var(--text-muted);">Loyalty Status</div>
                                <div id="clientLoyaltyStatus"
                                    style="font-size: 1.5rem; font-weight: bold; color: var(--info);">-</div>
                            </div>
                        </div>
                        <p style="color: var(--text-muted); font-size: 0.9rem; margin: 0;">Based on your purchase
                            history</p>
                    </div>
                </div>
            </div>


            <!-- Promotions Section -->
            <div class="content-section" id="promotionsSection">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <h2 style="display: flex; align-items: center; gap: 0.5rem;">
                        <i class="fas fa-tags"></i>
                        Promotions & Discounts
                    </h2>
                    <div style="display: flex; gap: 0.5rem;">
                        <button class="btn btn-outline" onclick="loadPromotions()">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                    </div>
                </div>

                <!-- Promotion Stats -->
                <div
                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
                    <div class="card" style="text-align: center;">
                        <div style="font-size: 2rem; font-weight: bold; color: var(--success);" id="activePromosCount">0
                        </div>
                        <div style="color: var(--text-muted); margin-top: 0.5rem;">Active Promotions</div>
                    </div>
                    <div class="card" style="text-align: center;">
                        <div style="font-size: 2rem; font-weight: bold; color: var(--info);" id="totalDiscountGiven">₱0
                        </div>
                        <div style="color: var(--text-muted); margin-top: 0.5rem;">Total Discounts Given</div>
                    </div>
                    <div class="card" style="text-align: center;">
                        <div style="font-size: 2rem; font-weight: bold; color: var(--warning);" id="promoUsageCount">0
                        </div>
                        <div style="color: var(--text-muted); margin-top: 0.5rem;">Times Used</div>
                    </div>
                    <div class="card" style="text-align: center;">
                        <div style="font-size: 2rem; font-weight: bold; color: var(--primary);" id="avgDiscountPercent">
                            0%</div>
                        <div style="color: var(--text-muted); margin-top: 0.5rem;">Avg Discount</div>
                    </div>
                </div>

                <!-- Promotion Types -->
                <div class="card" style="margin-bottom: 2rem;">
                    <h3 style="margin-bottom: 1.5rem;">Quick Create</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                        <button class="btn btn-primary" onclick="createCustomPromotion()"
                            style="padding: 1.5rem; display: flex; flex-direction: column; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-ticket-alt" style="font-size: 2rem;"></i>
                            <span>Custom Promotion</span>
                            <small style="opacity: 0.8;">Create promotion with coupon code</small>
                        </button>
                        <button class="btn btn-secondary" onclick="createDirectPromo()"
                            style="padding: 1.5rem; display: flex; flex-direction: column; align-items: center; gap: 0.5rem; background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%); color: white; border: none;">
                            <i class="fas fa-percentage" style="font-size: 2rem;"></i>
                            <span>Direct Promo</span>
                            <small style="opacity: 0.8;">Create promo discount without coupon</small>
                        </button>
                        <button class="btn btn-success" onclick="createWeekendPromotion()"
                            style="padding: 1.5rem; display: flex; flex-direction: column; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-calendar-weekend" style="font-size: 2rem;"></i>
                            <span>Weekend Special</span>
                            <small style="opacity: 0.8;">Create weekend promotion</small>
                        </button>
                        <button class="btn btn-warning" onclick="createClearanceSale()"
                            style="padding: 1.5rem; display: flex; flex-direction: column; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-fire" style="font-size: 2rem;"></i>
                            <span>Clearance Sale</span>
                            <small style="opacity: 0.8;">Move slow inventory</small>
                        </button>
                        <button class="btn btn-info" onclick="createBulkDiscount()"
                            style="padding: 1.5rem; display: flex; flex-direction: column; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-boxes" style="font-size: 2rem;"></i>
                            <span>Bulk Discount</span>
                            <small style="opacity: 0.8;">Encourage bulk purchases</small>
                        </button>
                        <button class="btn btn-dark" onclick="createVIPOffer()"
                            style="padding: 1.5rem; display: flex; flex-direction: column; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-crown" style="font-size: 2rem;"></i>
                            <span>VIP Offer</span>
                            <small style="opacity: 0.8;">Reward loyal customers</small>
                        </button>
                    </div>
                </div>

                <!-- Active Promotions List -->
                <div class="card">
                    <h3 style="margin-bottom: 1.5rem;">Active Promotions</h3>
                    <div id="activePromotionsList">
                        <div style="padding: 2rem; text-align: center; color: var(--text-muted);">
                            <i class="fas fa-tags" style="font-size: 2rem; opacity: 0.3; margin-bottom: 0.5rem;"></i>
                            <p>No active promotions. Create one to get started!</p>
                        </div>
                    </div>
                </div>

                <!-- Expired/Scheduled Promotions -->
                <div class="card" style="margin-top: 2rem;">
                    <h3 style="margin-bottom: 1.5rem;">Scheduled & Expired</h3>
                    <div id="scheduledExpiredPromotionsList">
                        <div style="padding: 2rem; text-align: center; color: var(--text-muted);">
                            <i class="fas fa-clock" style="font-size: 2rem; opacity: 0.3; margin-bottom: 0.5rem;"></i>
                            <p>No scheduled or expired promotions</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reports Section -->
            <div class="content-section" id="reportsSection">
                <!-- Content will be loaded by reports.js -->
            </div>

        </div>
    </div>

    <!-- Registration Modal -->
    <div id="registerModal" class="login-screen-modern" style="display: none;">
        <div class="login-background">
            <div class="login-pattern"></div>
        </div>
        <div class="login-container-modern">
            <div class="login-card-modern">
                <!-- Brand Logo -->
                <div class="login-brand">
                    <img src="assets/crisnil-logo.svg" alt="CRISNIL Trading Corp" class="login-logo-svg"
                        style="width: 300px; height: auto; margin-bottom: 1.5rem;">
                    <h2 class="login-title">Create Your Account</h2>
                    <p class="login-subtitle">Join CRISNIL Trading Corp - Premium Frozen Food Supplier</p>
                </div>

                <!-- Registration Form -->
                <form id="registerForm" class="login-form-modern">
                    <div class="form-group-modern">
                        <label class="form-label-modern">
                            <i class="fas fa-user"></i>
                            Username
                        </label>
                        <input type="text" name="username" class="form-input-modern" required minlength="3"
                            placeholder="Enter username (min. 3 characters)" autocomplete="username">
                    </div>

                    <div class="form-group-modern">
                        <label class="form-label-modern">
                            <i class="fas fa-envelope"></i>
                            Email Address
                        </label>
                        <input type="email" name="email" class="form-input-modern" required placeholder="Enter email address"
                            autocomplete="email">
                    </div>

                    <div class="form-group-modern">
                        <label class="form-label-modern">
                            <i class="fas fa-lock"></i>
                            Password
                        </label>
                        <div class="password-input-wrapper">
                            <input type="password" name="password" class="form-input-modern" id="regPasswordMain" required
                                minlength="6" placeholder="Enter password (min. 6 characters)"
                                autocomplete="new-password">
                            <button type="button" class="password-toggle" onclick="toggleRegPasswordMain()">
                                <i class="fas fa-eye" id="regPasswordMainToggleIcon"></i>
                            </button>
                        </div>
                    </div>

                    <div class="form-group-modern">
                        <label class="form-label-modern">
                            <i class="fas fa-lock"></i>
                            Confirm Password
                        </label>
                        <div class="password-input-wrapper">
                            <input type="password" name="confirmPassword" class="form-input-modern" id="regConfirmPasswordMain"
                                required placeholder="Confirm your password" autocomplete="new-password">
                            <button type="button" class="password-toggle" onclick="toggleRegConfirmPasswordMain()">
                                <i class="fas fa-eye" id="regConfirmPasswordMainToggleIcon"></i>
                            </button>
                        </div>
                    </div>

                    <div class="form-group-modern">
                        <label class="form-label-modern">
                            <i class="fas fa-user-tag"></i>
                            Account Type
                        </label>
                        <select name="role" class="form-input-modern" required onchange="toggleBusinessNameField(this.value)">
                            <option value="client">Individual Customer</option>
                            <option value="b2b">Business Partner (B2B)</option>
                        </select>
                        <small
                            style="color: rgba(255, 255, 255, 0.7); font-size: 0.8rem; margin-top: 0.5rem; display: block;">
                            Choose "Business Partner" for wholesale/business accounts
                        </small>
                    </div>

                    <div class="form-group-modern" id="businessNameGroup">
                        <label class="form-label-modern">
                            <i class="fas fa-building"></i>
                            Business Name <span id="businessNameRequired"
                                style="color: var(--error); display: none;">*</span>
                        </label>
                        <input type="text" name="business_name" class="form-input-modern"
                            placeholder="Your restaurant/business name (Optional)">
                        <small
                            style="color: rgba(255, 255, 255, 0.7); font-size: 0.8rem; margin-top: 0.5rem; display: block;">
                            Required for B2B accounts, optional for individual customers
                        </small>
                    </div>

                    <button type="submit" class="btn-login-modern">
                        <i class="fas fa-user-plus"></i>
                        Create Account
                    </button>
                </form>

                <!-- Back to Login -->
                <div class="login-footer">
                    <p>Already have an account?</p>
                    <button class="btn-create-account" onclick="closeRegisterModal(); showLogin();">
                        <i class="fas fa-sign-in-alt"></i>
                        Sign In
                    </button>
                </div>

                <!-- Security Badge -->
                <div class="security-badge">
                    <i class="fas fa-shield-alt"></i>
                    <span>Secured with 256-bit SSL encryption</span>
                </div>
            </div>

            <!-- Side Panel -->
            <div class="login-side-panel">
                <div class="side-panel-content">
                    <h3>Why Shop with CRISNIL?</h3>
                    <div class="feature-list">
                        <div class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <div>
                                <h4>Premium Quality</h4>
                                <p>Fresh frozen products</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <div>
                                <h4>Fast Delivery</h4>
                                <p>Region 4 & NCR coverage</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <div>
                                <h4>Best Prices</h4>
                                <p>Competitive wholesale rates</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <div>
                                <h4>Easy Ordering</h4>
                                <p>Shop online anytime</p>
                            </div>
                        </div>
                    </div>
                    <div class="testimonial">
                        <i class="fas fa-quote-left"></i>
                        <p>"Best quality frozen products! Fast delivery and great prices. Highly recommended!"</p>
                        <div class="testimonial-author">
                            <strong>Maria Santos</strong>
                            <span>Restaurant Owner</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Product Creation Modal -->
    <div id="addProductModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-plus"></i> Add New Product</h3>
                <span class="close" onclick="closeAddProductModal()">&times;</span>
            </div>
            <form id="addProductForm">
                <div class="form-group">
                    <label class="form-label">Product Name</label>
                    <input type="text" name="name" class="form-input" required placeholder="Enter product name">
                </div>
                <div class="form-group">
                    <label class="form-label">Description</label>
                    <textarea name="description" class="form-input" rows="3"
                        placeholder="Enter product description"></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Category</label>
                        <select name="category" class="form-input" required>
                            <option value="">Select Category</option>
                            <option value="chicken">Chicken</option>
                            <option value="beef">Beef</option>
                            <option value="pork">Pork</option>
                            <option value="seafood">Seafood</option>
                            <option value="vegetables">Vegetables</option>
                            <option value="dairy">Dairy</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Unit</label>
                        <select name="unit" class="form-input" required>
                            <option value="">Select Unit</option>
                            <option value="kg">Kilogram (kg)</option>
                            <option value="g">Gram (g)</option>
                            <option value="lbs">Pound (lbs)</option>
                            <option value="piece">Piece</option>
                            <option value="pack">Pack</option>
                            <option value="box">Box</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Price (₱)</label>
                        <input type="number" name="price" class="form-input" required min="0" step="0.01"
                            placeholder="0.00">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Initial Stock</label>
                        <input type="number" name="stock" class="form-input" required min="0" placeholder="0">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Minimum Stock</label>
                        <input type="number" name="minStock" class="form-input" required min="0" placeholder="10">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Maximum Stock</label>
                        <input type="number" name="maxStock" class="form-input" min="0" placeholder="1000">
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Storage Temperature (°C)</label>
                    <input type="number" name="temperature" class="form-input" value="-18" placeholder="-18">
                </div>
                <div class="form-group">
                    <label class="form-label">Shelf Life (days)</label>
                    <input type="number" name="shelfLife" class="form-input" value="365" placeholder="365">
                </div>

                <!-- Batch Information Section (for Expiry Tracking) -->
                <div class="form-group" style="border-top: 1px solid var(--border-color); padding-top: 1rem; margin-top: 1rem;">
                    <label class="form-label">
                        <i class="fas fa-boxes"></i> Initial Batch Information (Optional)
                    </label>
                    <small style="color: var(--text-muted); display: block; margin-bottom: 1rem;">
                        Add batch details for expiry tracking and automatic discounts
                    </small>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Batch Number</label>
                            <input type="text" name="batchNumber" class="form-input" placeholder="e.g., BATCH-001">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Received Date</label>
                            <input type="date" name="receivedDate" class="form-input" id="addProductReceivedDate">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Expiry Date</label>
                        <input type="date" name="expiryDate" class="form-input">
                        <small style="color: var(--text-muted); display: block; margin-top: 0.25rem;">
                            System will automatically apply discounts when product is near expiry
                        </small>
                    </div>
                </div>

                <!-- Image Upload Section -->
                <div class="form-group"
                    style="border-top: 1px solid var(--border-color); padding-top: 1rem; margin-top: 1rem;">
                    <label for="productImageFirst">
                        <i class="fas fa-image"></i> Product Image (Optional)
                    </label>
                    <input type="file" id="productImageFirst" name="image" class="form-input"
                        accept="image/jpeg,image/jpg,image/png,image/gif,image/webp">
                    <small style="color: var(--text-muted); display: block; margin-top: 0.5rem;">
                        Max size: 5MB. Formats: JPG, PNG, GIF, WEBP
                    </small>
                    <div id="addProductImagePreviewFirst" style="margin-top: 1rem; display: none;">
                        <img id="addProductImagePreviewImgFirst" src="" alt="Preview"
                            style="max-width: 200px; max-height: 200px; border-radius: 8px; border: 2px solid var(--border-color);">
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeAddProductModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-plus"></i> Create Product
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Product Edit Modal -->
    <div id="editProductModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-edit"></i> Edit Product</h3>
                <span class="close" onclick="closeEditProductModal()">&times;</span>
            </div>
            <form id="editProductForm" onsubmit="handleEditProduct(event)">
                <input type="hidden" id="editProductId" name="id" />
                <div class="form-group">
                    <label class="form-label">Product Name</label>
                    <input type="text" id="editProductName" name="name" class="form-input" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Description</label>
                    <textarea id="editProductDescription" name="description" class="form-input" rows="3"></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Category</label>
                        <select id="editProductCategory" name="category" class="form-input" required>
                            <option value="chicken">Chicken</option>
                            <option value="beef">Beef</option>
                            <option value="pork">Pork</option>
                            <option value="seafood">Seafood</option>
                            <option value="vegetables">Vegetables</option>
                            <option value="dairy">Dairy</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Unit</label>
                        <select id="editProductUnit" name="unit" class="form-input" required>
                            <option value="kg">Kilogram (kg)</option>
                            <option value="g">Gram (g)</option>
                            <option value="lbs">Pound (lbs)</option>
                            <option value="piece">Piece</option>
                            <option value="pack">Pack</option>
                            <option value="box">Box</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Price (₱)</label>
                        <input type="number" id="editProductPrice" name="price" class="form-input" required min="0"
                            step="0.01">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Stock</label>
                        <input type="number" id="editProductStock" name="stock" class="form-input" required min="0">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Minimum Stock</label>
                        <input type="number" id="editProductMinStock" name="minStock" class="form-input" required
                            min="0">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Maximum Stock</label>
                        <input type="number" id="editProductMaxStock" name="maxStock" class="form-input" min="0">
                    </div>
                </div>

                <!-- Current Images Section -->
                <div id="editProductCurrentImagesFirst" class="form-group"
                    style="border-top: 1px solid var(--border-color); padding-top: 1rem; margin-top: 1rem; display: none;">
                    <label><i class="fas fa-images"></i> Current Images</label>
                    <div id="editProductImagesContainerFirst"
                        style="display: flex; gap: 1rem; flex-wrap: wrap; margin-top: 0.5rem;">
                        <!-- Current images will be displayed here -->
                    </div>
                </div>

                <!-- Image Upload Section -->
                <div class="form-group"
                    style="border-top: 1px solid var(--border-color); padding-top: 1rem; margin-top: 1rem;">
                    <label for="editProductImageFirst">
                        <i class="fas fa-image"></i> Add New Image (Optional)
                    </label>
                    <input type="file" id="editProductImageFirst" name="image" class="form-input"
                        accept="image/jpeg,image/jpg,image/png,image/gif,image/webp">
                    <small style="color: var(--text-muted); display: block; margin-top: 0.5rem;">
                        Max size: 5MB. Formats: JPG, PNG, GIF, WEBP
                    </small>
                    <div id="editProductImagePreviewFirst" style="margin-top: 1rem; display: none;">
                        <img id="editProductImagePreviewImgFirst" src="" alt="Preview"
                            style="max-width: 200px; max-height: 200px; border-radius: 8px; border: 2px solid var(--border-color);">
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeEditProductModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Save Changes
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Restock with Batch Modal -->
    <div id="restockBatchModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-boxes"></i> Restock with Batch Information</h3>
                <span class="close" onclick="closeRestockBatchModal()">&times;</span>
            </div>
            <form id="restockBatchForm" onsubmit="handleRestockWithBatch(event)">
                <div class="form-group">
                    <label class="form-label">Select Product</label>
                    <select id="restockProductSelect" name="productId" class="form-input" required>
                        <option value="">Select a product...</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Batch Number</label>
                    <input type="text" name="batchNumber" class="form-input" required placeholder="e.g., BATCH-001">
                    <small style="color: var(--text-muted); display: block; margin-top: 0.25rem;">
                        Unique identifier for this batch
                    </small>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Quantity</label>
                        <input type="number" name="quantity" class="form-input" required min="1" placeholder="0">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Received Date</label>
                        <input type="date" name="receivedDate" class="form-input" required>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Expiry Date</label>
                    <input type="date" name="expiryDate" class="form-input" required>
                    <small style="color: var(--text-muted); display: block; margin-top: 0.25rem;">
                        System will automatically apply discounts when product is near expiry (30 days)
                    </small>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeRestockBatchModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-check"></i> Add Batch & Update Stock
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Order Confirmation Modal -->
    <div id="orderConfirmationModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-check-circle"></i> Order Confirmed!</h3>
                <span class="close" onclick="closeOrderConfirmationModal()">&times;</span>
            </div>
            <div class="order-confirmation-content">
                <div class="confirmation-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h4 id="orderConfirmationTitle">Order #<span id="orderNumber"></span> has been placed successfully!</h4>
                <p id="orderConfirmationMessage">Thank you for your order. We'll process it and contact you soon.</p>

                <div class="order-summary" id="orderSummary">
                    <!-- Order details will be populated here -->
                </div>

                <div class="confirmation-actions">
                    <button class="btn btn-secondary" onclick="closeOrderConfirmationModal()">
                        <i class="fas fa-shopping-bag"></i>
                        Continue Shopping
                    </button>
                    <button class="btn btn-primary" onclick="viewMyOrders()">
                        <i class="fas fa-file-invoice-dollar"></i>
                        View My Orders
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Create Staff Account Modal -->
    <div id="createStaffModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-user-plus"></i> Create Staff Account</h3>
                <span class="close" onclick="closeCreateStaffModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="createStaffForm">
                    <div class="form-group">
                        <label for="staffUsername">Username *</label>
                        <input type="text" id="staffUsername" name="username" class="form-input" required autocomplete="username">
                    </div>
                    <div class="form-group">
                        <label for="staffEmail">Email *</label>
                        <input type="email" id="staffEmail" name="email" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="staffPassword">Password *</label>
                        <input type="password" id="staffPassword" name="password" class="form-input" required autocomplete="new-password">
                    </div>
                    <div class="form-group">
                        <label for="staffBusinessName">Business Name</label>
                        <input type="text" id="staffBusinessName" name="business_name" class="form-input">
                    </div>
                    <div class="form-group">
                        <label for="staffPermissions">Permissions</label>
                        <div
                            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">
                            <label style="display: flex; align-items: center; gap: 0.5rem;">
                                <input type="checkbox" name="permissions" value="inventory" checked>
                                Manage Inventory
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem;">
                                <input type="checkbox" name="permissions" value="orders" checked>
                                Manage Orders
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem;">
                                <input type="checkbox" name="permissions" value="products" checked>
                                Manage Products
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem;">
                                <input type="checkbox" name="permissions" value="promotions">
                                Manage Promotions
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem;">
                                <input type="checkbox" name="permissions" value="analytics">
                                View Analytics
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem;">
                                <input type="checkbox" name="permissions" value="settings">
                                System Settings
                            </label>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary"
                            onclick="closeCreateStaffModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary">Create Staff Account</button>
                    </div>
                </form>
            </div>
        </div>
    </div>


    <!-- Notifications Dropdown Panel -->
    <div id="notificationsPanel" class="notifications-panel" style="display: none;">
        <div class="notifications-dropdown">
            <div class="notifications-header">
                <h3><i class="fas fa-bell"></i> Notifications</h3>
                <div class="notifications-actions">
                    <button onclick="markAllNotificationsRead()" class="btn-icon" title="Mark all as read">
                        <i class="fas fa-check-double"></i>
                    </button>
                    <button onclick="clearAllNotifications()" class="btn-icon" title="Clear all">
                        <i class="fas fa-trash"></i>
                    </button>
                    <button onclick="toggleNotificationPanel()" class="btn-icon" title="Close">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div id="notificationsContainer" class="notifications-content">
                <!-- Notifications will be populated here by JavaScript -->
                <div class="no-notifications">
                    <i class="fas fa-bell-slash"></i>
                    <p>No notifications yet</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Enhanced Profile & Settings Panel -->
    <div id="profileSettingsPanel" class="profile-settings-panel" style="display: none;">
        <div class="profile-settings-container">
            <div class="profile-settings-header">
                <h2><i class="fas fa-user-cog"></i> Profile & Settings</h2>
                <button class="close-btn" onclick="closeProfileSettings()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="profile-settings-content">
                <!-- Sidebar Navigation -->
                <div class="profile-sidebar">
                    <div class="profile-user-info">
                        <div class="profile-avatar-section">
                            <div class="profile-avatar" id="userAvatar">
                                <div class="avatar-initials" id="userAvatarInitials">U</div>
                                <img id="profilePictureDisplay" style="display: none; width: 100%; height: 100%; object-fit: cover; border-radius: 50%;" alt="Profile Picture">
                            </div>
                            <div class="user-basic-info">
                                <div class="user-name" id="profileUserName">Loading...</div>
                                <div class="user-role" id="profileUserRole">User</div>
                            </div>
                        </div>
                    </div>

                    <nav class="profile-nav">
                        <button class="profile-tab active" onclick="switchProfileTab('profile')">
                            <i class="fas fa-user"></i> Profile Information
                        </button>
                        <button class="profile-tab" onclick="switchProfileTab('security')">
                            <i class="fas fa-shield-alt"></i> Security & Password
                        </button>
                        <button class="profile-tab" onclick="switchProfileTab('preferences')">
                            <i class="fas fa-cog"></i> System Preferences
                        </button>
                        <button class="profile-tab" onclick="switchProfileTab('notifications')">
                            <i class="fas fa-bell"></i> Notifications
                        </button>
                        <button class="profile-tab" onclick="switchProfileTab('activity')">
                            <i class="fas fa-history"></i> Activity Log
                        </button>
                        <button class="profile-tab" onclick="switchProfileTab('privacy')">
                            <i class="fas fa-lock"></i> Privacy & Data
                        </button>
                    </nav>
                </div>

                <!-- Main Content Area -->
                <div class="profile-main-content">
                    <!-- Profile Information Tab -->
                    <div id="profileTab" class="profile-tab-content active">
                        <div class="profile-section">
                            <h3><i class="fas fa-user-edit"></i> Profile Information</h3>

                            <!-- Profile Picture Upload -->
                            <div class="profile-picture-section">
                                <h4>Profile Picture</h4>
                                <div class="profile-picture-upload" id="profilePictureUpload">
                                    <div class="upload-area" id="uploadAreaClick" style="cursor: pointer;">
                                        <div class="upload-preview">
                                            <img id="profilePicturePreview" style="display: none; max-width: 150px; max-height: 150px; border-radius: 50%; object-fit: cover; border: 3px solid var(--primary);"
                                                alt="Profile Preview">
                                            <div id="profilePicturePlaceholder" class="upload-placeholder">
                                                <i class="fas fa-camera"></i>
                                                <span>Click to upload</span>
                                            </div>
                                        </div>
                                        <input type="file" id="profilePictureInput" accept="image/*"
                                            style="display: none;">
                                    </div>
                                    <div class="upload-info">
                                        <p>Recommended: Square image, max 5MB</p>
                                        <p>Supported formats: JPEG, PNG, GIF</p>
                                        <button type="button" id="uploadPictureBtn" class="btn btn-secondary"
                                            style="margin-top: 0.5rem;">
                                            <i class="fas fa-upload"></i> Upload Picture
                                        </button>
                                        <button type="button" id="deleteProfilePictureBtn" class="btn btn-danger"
                                            style="margin-top: 0.5rem; margin-left: 0.5rem; display: none;">
                                            <i class="fas fa-trash"></i> Delete Picture
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Profile Form -->
                            <form id="enhancedProfileForm" class="profile-form">
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="profileName">Full Name *</label>
                                        <input type="text" id="profileName" name="name" class="form-input" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="profileEmail">Email Address *</label>
                                        <input type="email" id="profileEmail" name="email" class="form-input" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="profilePhone">Phone Number</label>
                                        <input type="tel" id="profilePhone" name="phone" class="form-input">
                                    </div>
                                    <div class="form-group">
                                        <label for="profileBusinessName">Business Name</label>
                                        <input type="text" id="profileBusinessName" name="businessName"
                                            class="form-input">
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="profileAddress">Address</label>
                                    <textarea id="profileAddress" name="address" class="form-input" rows="3"></textarea>
                                </div>

                                <div class="form-group">
                                    <label for="profileBio">Bio</label>
                                    <textarea id="profileBio" name="bio" class="form-input" rows="4"
                                        placeholder="Tell us about yourself..."></textarea>
                                </div>

                                <div class="form-actions">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-save"></i> Save Changes
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Security & Password Tab -->
                    <div id="securityTab" class="profile-tab-content">
                        <div class="profile-section">
                            <h3><i class="fas fa-shield-alt"></i> Security & Password</h3>

                            <div class="security-overview">
                                <div class="security-status">
                                    <div class="security-item">
                                        <i class="fas fa-check-circle text-success"></i>
                                        <span>Two-factor authentication: Recommended</span>
                                    </div>
                                    <div class="security-item">
                                        <i class="fas fa-clock text-warning"></i>
                                        <span>Last password change: Never</span>
                                    </div>
                                </div>
                            </div>

                            <form id="enhancedPasswordForm" class="profile-form">
                                <!-- Hidden username field for accessibility -->
                                <input type="text" name="username" autocomplete="username" style="display:none;" readonly>
                                
                                <div class="form-group">
                                    <label for="currentPassword">Current Password *</label>
                                    <div class="password-input-group">
                                        <input type="password" id="currentPassword" name="currentPassword"
                                            class="form-input" required autocomplete="current-password">
                                        <button type="button" class="password-toggle"
                                            onclick="togglePasswordVisibility('currentPassword')">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="newPassword">New Password *</label>
                                    <div class="password-input-group">
                                        <input type="password" id="newPassword" name="newPassword" class="form-input"
                                            required autocomplete="new-password">
                                        <button type="button" class="password-toggle"
                                            onclick="togglePasswordVisibility('newPassword')">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </div>
                                    <div class="password-strength" id="passwordStrength">
                                        <div class="strength-bar">
                                            <div class="strength-fill"></div>
                                        </div>
                                        <div class="strength-text">Password strength</div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="confirmPassword">Confirm New Password *</label>
                                    <div class="password-input-group">
                                        <input type="password" id="confirmPassword" name="confirmPassword"
                                            class="form-input" required autocomplete="new-password">
                                        <button type="button" class="password-toggle"
                                            onclick="togglePasswordVisibility('confirmPassword')">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </div>
                                </div>

                                <div class="password-requirements">
                                    <h4>Password Requirements:</h4>
                                    <ul>
                                        <li>At least 8 characters long</li>
                                        <li>Contains uppercase and lowercase letters</li>
                                        <li>Contains at least one number</li>
                                        <li>Contains special characters (recommended)</li>
                                    </ul>
                                </div>

                                <!-- Email Verification Section -->
                                <div class="form-group"
                                    style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); padding: 1.25rem; border-radius: 10px; border-left: 4px solid #f59e0b; margin-bottom: 1rem; box-shadow: 0 2px 8px rgba(245, 158, 11, 0.1);">
                                    <div style="display: flex; align-items: start; gap: 1rem; margin-bottom: 1rem;">
                                        <div style="background: rgba(245, 158, 11, 0.2); padding: 0.75rem; border-radius: 8px;">
                                            <i class="fas fa-shield-alt" style="color: #f59e0b; font-size: 1.5rem;"></i>
                                        </div>
                                        <div style="flex: 1;">
                                            <h4 style="color: #92400e; margin: 0 0 0.5rem 0; font-size: 1.1rem; font-weight: 600;">
                                                Email Verification Required
                                            </h4>
                                            <p style="margin: 0; color: #92400e; font-size: 0.9rem; line-height: 1.5;">
                                                For your security, we'll send a 6-digit verification code to <strong id="userEmailDisplay"></strong> before changing your password.
                                            </p>
                                        </div>
                                    </div>
                                    <button type="button" id="sendVerificationBtn" class="btn btn-warning" style="width: 100%;"
                                        onclick="profileSettingsManager.requestPasswordChangeVerification()">
                                        <i class="fas fa-envelope"></i> Send Verification Code to Email
                                    </button>
                                    <p style="margin: 0.75rem 0 0 0; color: #92400e; font-size: 0.85rem; text-align: center;">
                                        <i class="fas fa-info-circle"></i> Code will be valid for 10 minutes
                                    </p>
                                </div>

                                <!-- Verification Code Input (Hidden by default) -->
                                <div id="verificationCodeSection" class="form-group"
                                    style="display: none; background: linear-gradient(135deg, #e0f2fe 0%, #bae6fd 100%); padding: 1.25rem; border-radius: 10px; border-left: 4px solid #0891b2; animation: slideDown 0.3s ease-out; box-shadow: 0 2px 8px rgba(8, 145, 178, 0.1);">
                                    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem;">
                                        <label for="verificationCode" style="color: #0c4a6e; font-weight: 600; font-size: 1.05rem; margin: 0;">
                                            <i class="fas fa-key"></i> Enter Verification Code
                                        </label>
                                        <div style="display: flex; align-items: center; gap: 0.5rem;">
                                            <i class="fas fa-clock" style="color: #0891b2;"></i>
                                            <span id="verificationTimer" style="color: #0891b2; font-weight: 600; font-family: 'Courier New', monospace; font-size: 1rem;">10:00</span>
                                        </div>
                                    </div>
                                    <p style="margin: 0 0 1rem 0; color: #0c4a6e; font-size: 0.9rem;">
                                        <i class="fas fa-envelope-open-text"></i> Check your email inbox for the 6-digit code
                                    </p>
                                    <input type="text" id="verificationCode" name="verificationCode" class="form-input"
                                        placeholder="000000" maxlength="6" pattern="[0-9]{6}" inputmode="numeric"
                                        style="font-size: 1.5rem; letter-spacing: 1rem; text-align: center; font-family: 'Courier New', monospace; font-weight: bold; background: white; border: 2px solid #0891b2;">
                                    <div style="margin-top: 0.75rem; padding: 0.75rem; background: rgba(8, 145, 178, 0.1); border-radius: 6px;">
                                        <p style="margin: 0; color: #0c4a6e; font-size: 0.85rem; text-align: center;">
                                            <i class="fas fa-info-circle"></i> Didn't receive the code? Check your spam folder or click "Resend Code" after the timer expires.
                                        </p>
                                    </div>
                                </div>

                                <style>
                                    @keyframes slideDown {
                                        from {
                                            opacity: 0;
                                            transform: translateY(-10px);
                                        }
                                        to {
                                            opacity: 1;
                                            transform: translateY(0);
                                        }
                                    }
                                    
                                    @keyframes pulse {
                                        0%, 100% { transform: scale(1); }
                                        50% { transform: scale(1.05); }
                                    }
                                    
                                    #verificationCode:focus {
                                        border-color: #0891b2;
                                        box-shadow: 0 0 0 3px rgba(8, 145, 178, 0.2);
                                    }
                                </style>

                                <div class="form-actions">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-key"></i> Change Password
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- System Preferences Tab -->
                    <div id="preferencesTab" class="profile-tab-content">
                        <div class="profile-section">
                            <h3><i class="fas fa-cog"></i> System Preferences</h3>

                            <div class="preferences-grid">
                                <div class="preference-group">
                                    <h4><i class="fas fa-palette"></i> Appearance</h4>
                                    <div class="preference-item">
                                        <label class="preference-label">
                                            <span>Dark Mode</span>
                                            <div class="toggle-switch">
                                                <input type="checkbox" id="darkModeToggle">
                                                <span class="toggle-slider"></span>
                                            </div>
                                        </label>
                                    </div>
                                </div>

                                <div class="preference-group">
                                    <h4><i class="fas fa-money-bill"></i> Regional Settings</h4>
                                    <div class="form-group">
                                        <label for="currencySelect">Currency</label>
                                        <select id="currencySelect" class="form-input">
                                            <option value="PHP">Philippine Peso (₱)</option>
                                            <option value="USD">US Dollar ($)</option>
                                            <option value="EUR">Euro (€)</option>
                                            <option value="GBP">British Pound (£)</option>
                                        </select>
                                    </div>

                                    <div class="form-group">
                                        <label for="timezoneSelect">Timezone</label>
                                        <select id="timezoneSelect" class="form-input">
                                            <option value="Asia/Manila">Asia/Manila (GMT+8)</option>
                                            <option value="UTC">UTC (GMT+0)</option>
                                            <option value="America/New_York">America/New_York (GMT-5)</option>
                                            <option value="Europe/London">Europe/London (GMT+0)</option>
                                        </select>
                                    </div>

                                    <div class="form-group">
                                        <label for="taxRateInput">Tax Rate (%)</label>
                                        <input type="number" id="taxRateInput" class="form-input" min="0" max="100"
                                            step="0.1" value="12">
                                    </div>
                                </div>

                                <div class="preference-group">
                                    <h4><i class="fas fa-language"></i> Language & Format</h4>
                                    <div class="form-group">
                                        <label for="languageSelect">Language</label>
                                        <select id="languageSelect" class="form-input">
                                            <option value="en">English</option>
                                            <option value="fil">Filipino</option>
                                        </select>
                                    </div>

                                    <div class="form-group">
                                        <label for="dateFormatSelect">Date Format</label>
                                        <select id="dateFormatSelect" class="form-input">
                                            <option value="MM/DD/YYYY">MM/DD/YYYY</option>
                                            <option value="DD/MM/YYYY">DD/MM/YYYY</option>
                                            <option value="YYYY-MM-DD">YYYY-MM-DD</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Notifications Tab -->
                    <div id="notificationsTab" class="profile-tab-content">
                        <div class="profile-section">
                            <h3><i class="fas fa-bell"></i> Notification Preferences</h3>

                            <!-- Notification Mode Selector -->
                            <div class="notification-mode-selector" style="background: var(--card-bg); padding: 1.5rem; border-radius: 0.75rem; margin-bottom: 1.5rem; border: 2px solid var(--border);">
                                <h4 style="margin-bottom: 1rem;"><i class="fas fa-volume-up"></i> Toast Notification Mode</h4>
                                <p style="color: var(--text-muted); margin-bottom: 1rem; font-size: 0.9rem;">
                                    Control how often you see popup notifications while using the app.
                                </p>
                                <div class="form-group">
                                    <label for="notificationModeSelect">Notification Display Mode</label>
                                    <select id="notificationModeSelect" class="form-input" onchange="updateNotificationMode()">
                                        <option value="all">🔔 All Notifications - Show all popups (Default)</option>
                                        <option value="important">⚠️ Important Only - Only errors and warnings</option>
                                        <option value="silent">🔕 Silent Mode - No popups (console only)</option>
                                    </select>
                                    <p style="color: var(--text-muted); margin-top: 0.5rem; font-size: 0.85rem;">
                                        Note: Critical error messages will always appear regardless of this setting.
                                    </p>
                                </div>
                            </div>

                            <div class="notification-groups">
                                <div class="notification-group">
                                    <h4>Order Notifications</h4>
                                    <div class="notification-item">
                                        <label class="notification-label">
                                            <span>Order confirmations</span>
                                            <div class="toggle-switch">
                                                <input type="checkbox" class="notification-toggle" data-type="orders"
                                                    checked>
                                                <span class="toggle-slider"></span>
                                            </div>
                                        </label>
                                    </div>
                                    <div class="notification-item">
                                        <label class="notification-label">
                                            <span>Delivery updates</span>
                                            <div class="toggle-switch">
                                                <input type="checkbox" class="notification-toggle" data-type="delivery"
                                                    checked>
                                                <span class="toggle-slider"></span>
                                            </div>
                                        </label>
                                    </div>
                                </div>

                                <div class="notification-group">
                                    <h4>Promotional Notifications</h4>
                                    <div class="notification-item">
                                        <label class="notification-label">
                                            <span>Special offers and discounts</span>
                                            <div class="toggle-switch">
                                                <input type="checkbox" class="notification-toggle"
                                                    data-type="promotions" checked>
                                                <span class="toggle-slider"></span>
                                            </div>
                                        </label>
                                    </div>
                                    <div class="notification-item">
                                        <label class="notification-label">
                                            <span>New product announcements</span>
                                            <div class="toggle-switch">
                                                <input type="checkbox" class="notification-toggle" data-type="products">
                                                <span class="toggle-slider"></span>
                                            </div>
                                        </label>
                                    </div>
                                </div>

                                <div class="notification-group">
                                    <h4>System Notifications</h4>
                                    <div class="notification-item">
                                        <label class="notification-label">
                                            <span>Inventory alerts (Admin only)</span>
                                            <div class="toggle-switch">
                                                <input type="checkbox" class="notification-toggle" data-type="inventory"
                                                    checked>
                                                <span class="toggle-slider"></span>
                                            </div>
                                        </label>
                                    </div>
                                    <div class="notification-item">
                                        <label class="notification-label">
                                            <span>System maintenance</span>
                                            <div class="toggle-switch">
                                                <input type="checkbox" class="notification-toggle" data-type="system">
                                                <span class="toggle-slider"></span>
                                            </div>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Activity Log Tab -->
                    <div id="activityTab" class="profile-tab-content">
                        <div class="profile-section">
                            <h3><i class="fas fa-history"></i> Activity Log</h3>

                            <div class="activity-controls">
                                <button class="btn btn-secondary" onclick="window.profileManager?.clearActivityLog()">
                                    <i class="fas fa-trash"></i> Clear Log
                                </button>
                            </div>

                            <div class="activity-log" id="activityLogList">
                                <!-- Activity items will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>

                    <!-- Privacy & Data Tab -->
                    <div id="privacyTab" class="profile-tab-content">
                        <div class="profile-section">
                            <h3><i class="fas fa-lock"></i> Privacy & Data</h3>

                            <div class="privacy-sections">
                                <div class="privacy-section">
                                    <h4>Data Export</h4>
                                    <p>Download a copy of your personal data and account information.</p>
                                    <button class="btn btn-secondary" onclick="window.profileManager?.exportUserData()">
                                        <i class="fas fa-download"></i> Export My Data
                                    </button>
                                </div>

                                <div class="privacy-section">
                                    <h4>Account Visibility</h4>
                                    <div class="privacy-item">
                                        <label class="privacy-label">
                                            <span>Show profile to other users</span>
                                            <div class="toggle-switch">
                                                <input type="checkbox" id="profileVisibility">
                                                <span class="toggle-slider"></span>
                                            </div>
                                        </label>
                                    </div>
                                    <div class="privacy-item">
                                        <label class="privacy-label">
                                            <span>Allow contact from other businesses</span>
                                            <div class="toggle-switch">
                                                <input type="checkbox" id="contactPermission">
                                                <span class="toggle-slider"></span>
                                            </div>
                                        </label>
                                    </div>
                                </div>

                                <div class="privacy-section danger-zone">
                                    <h4>Danger Zone</h4>
                                    <p>These actions are permanent and cannot be undone.</p>
                                    <button class="btn btn-danger" onclick="confirmAccountDeletion()">
                                        <i class="fas fa-exclamation-triangle"></i> Delete Account
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Mini Cart Preview -->
    <div id="miniCartPreview" style="display: none;"></div>

    <!-- Search Suggestions -->
    <div id="searchSuggestions" style="display: none;"></div>

    <!-- Compare Button (Floating) -->
    <button id="compareButton" class="btn btn-primary" onclick="showCompareModal()"
        style="display: none; position: fixed; bottom: 2rem; right: 2rem; z-index: 1000;">
        <i class="fas fa-balance-scale"></i> Compare (0)
    </button>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="script.js"></script>
    <script src="database-sync.js"></script>
    <script src="profile-settings.js"></script>
    <script src="expiry-tracker.js"></script>
    <script src="reviews.js"></script>
    <script src="reports.js"></script>
    <script src="product-management.js"></script>
    <script src="cart-integration.js"></script>
    <script src="client-shopping.js"></script>
    <script src="inventory-modals.js"></script>
    <script src="coupon.js"></script>
    
    <!-- Enhanced Supplier Management System -->
    <script src="supplier-management.js"></script>
    <script src="product-loading-fix.js"></script>
    <script src="integrate-enhancements.js"></script>

    <!-- Tawk.to Live Chat Widget -->
    <!-- Note: Widget is loaded dynamically in script.js for client users only -->
    <!-- This prevents unnecessary loading on landing page and for admin/staff users -->
</body>

</html>